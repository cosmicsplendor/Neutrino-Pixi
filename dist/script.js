(()=>{var t={232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(32),i=n(529),c=n(146);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,t);var e,n,r,a,y=(r=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(a){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function d(t){var e,n=t.subject,r=t.viewport,o=t.world,i=t.z,a=void 0===i?1:i,l=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["subject","viewport","world","z"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=y.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},l))).z=a,e.pF=1/a,e.bounds={x:0,y:0,width:r.width,height:r.height},e.world=o||{width:r.width,height:r.height},e.onViewportChange=function(t){e.bounds.width=t.width*c.Z.devicePixelRatio,e.bounds.height=t.height*c.Z.devicePixelRatio,e.focusInst()},e.viewport=r,e.setSubject(n),r.on("change",e.onViewportChange),e.onViewportChange(r),e.focus(),e}return e=d,(n=[{key:"intersects",value:function(t){return t===this||!(t.width||t.height||t.hitbox)||(0,o.ex)((0,i.SF)(t),this.bounds)}},{key:"setSubject",value:function(t){t&&(this.subject=t,this.offset=(0,i.LP)(t),this.focus())}},{key:"focusInst",value:function(){this.subject&&(this.pos.x=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),this.pos.y=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2))}},{key:"focus",value:function(t){if(this.subject){var e=this.pF*-(0,o.uZ)(0,this.world.width-this.bounds.width,this.subject.pos.x+this.offset.x-this.bounds.width/2),n=this.pF*-(0,o.uZ)(0,this.world.height-this.bounds.height,this.subject.pos.y+this.offset.y-this.bounds.height/2);this.pos.x+=3*(e-this.pos.x)*t,this.pos.y+=3*(n-this.pos.y)*t}}},{key:"update",value:function(t){this.focus(t)}},{key:"onRemove",value:function(){this.viewport.off(this.onViewportChange)}}])&&l(e.prototype,n),d}(r.Z)},571:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,{Z:()=>f});var a,s,u,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pos,r=void 0===n?{x:0,y:0}:n,i=e.rotation,c=e.scale,a=e.anchor,s=e.pivot,u=e.id,l=e.alpha;o(this,t),this.pos=r,this._visible=!0,c&&(this.scale=c),i&&(this.rotation=i),a&&(this.anchor=a),s&&(this.pivot=s),l&&(this.alpha=l),Boolean(u)&&(this.id=u,t.addRef(u,this))}return c(t,null,[{key:"addRef",value:function(t,e){this.__entities[t]=e}},{key:"removeRef",value:function(t){this.__entities[t]=null}},{key:"get",value:function(t){return this.__entities[t]}},{key:"cleanupRecursively",value:function(e){if(e.onRemove&&e.onRemove(),e.id&&this.removeRef(e.id),e.children){var n,o=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw c}}}}(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.cleanupRecursively(i)}}catch(t){o.e(t)}finally{o.f()}}}},{key:"updateRecursively",value:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(e.movable&&(e.prevPosX=e.pos.x,e.prevPosY=e.pos.y,e.unduePosXUpdate&&(e.pos.x+=e.unduePosXUpdate,e.unduePosXUpdate=0),e.roll&&(e.prevRot=e.rotation)),e._visible=0!==e.alpha&&(!o.intersects||o.intersects(e)),(e._visible||e.forceUpdate)&&e.update&&e.update(n,r),e.children)for(var i=e.children,c=0,a=i.length;c<a;c++)t.updateRecursively(i[c],n,r,o)}},{key:"removeChild",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t.children=t.children.filter((function(t){return t!==e})),e.parent=null,n&&this.cleanupRecursively(e))}}]),c(t,[{key:"add",value:function(t){t.parent=this,this.children?this.children.push(t):this.children=[t]}},{key:"remove",value:function(e){t.removeChild(this.parent,this,e)}}]),t}();u={},(s="__entities")in(a=l)?Object.defineProperty(a,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[s]=u;const f=l},379:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=l(e);if(n){var o=l(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return u(this,t)});function i(t){var e,n=t.width,s=t.height,u=t.fill,l=t.stroke,f=t.strokeWidth,h=t.alpha,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["width","height","fill","stroke","strokeWidth","alpha"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},p))).width=n,e.height=s,e.fill=u,e.stroke=l,e.strokeWidth=f,e.alpha=h,e.type=o.JA,e}return i}(r.Z)},739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=f(e);if(n){var o=f(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function i(t){var e,n=t.frame,a=t.isCustom,s=void 0!==a&&a,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["frame","isCustom"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u));var l=i._meta[n];return l.hitbox&&(e.hitbox=l.hitbox),e.type=o.ey,e.initialRotation=l.rotation?-l.rotation*Math.PI/180:null,e.width=l.width,e.height=l.height,e.w=e.initialRotation?e.height:e.width,e.h=e.initialRotation?e.width:e.height,e.frame=s?[l.x,l.y,e.w,e.h]:n,e.initialRotation&&(e.initialPivotX=-e.height),e}return s(i,null,[{key:"injectAtlasmeta",value:function(t){this._meta=t}}]),s(i,[{key:"setAnchor",value:function(t){this.anchor=this.initialRotation?{x:t.y,y:t.x}:t}}]),i}(r.Z);h(p,"_assetsCache",null);const y=p},674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(571),o=n(915);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(p,t);var e,n,r,i,h=(r=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(i){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function p(t){var e,n=t.imgId,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["imgId"]);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r))).img=p._assetsCache.get(n),!e.img)throw new Error("Image with imgId ".concat(n," can't be found in the assets cache"));return e.type=o.hY,e}return e=p,n=[{key:"injectAssetsCache",value:function(t){this._assetsCache=t}}],null&&a(e.prototype,null),n&&a(e,n),p}(r.Z);f(h,"_assetsCache",null)},391:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Camera:()=>Z.Z,Circle:()=>d,IsoCube:()=>X,Node:()=>r.Z,Rect:()=>o.Z,TexRegion:()=>v.Z,Text:()=>k,Texture:()=>b.Z});var r=n(571),o=n(379),i=n(915);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=y(e);if(n){var o=y(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return p(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.radius,c=void 0===n?30:n,a=e.fill,u=e.stroke,h=void 0===u?"red":u,p=l(e,["radius","fill","stroke"]);return f(this,o),(t=r.call(this,s({},p))).radius=c,t.fill=a,t.stroke=h,t.type=i.Xw,t}return o}(r.Z);var b=n(674),v=n(739);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=S(e);if(n){var o=S(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return P(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.color,i=void 0===n?"white":n,c=e.size,a=void 0===c?"20pt":c,s=(e.value,A(e,["color","size","value"]));return j(this,o),(t=r.call(this,w({},s))).color=i,t.size=a,t}return o}(r.Z);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=M(e);if(n){var o=M(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return D(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.length,c=void 0===n?20:n,a=e.width,s=void 0===a?40:a,u=e.frontColor,l=void 0===u?"dimgrey":u,f=e.topColor,h=void 0===f?"#B97A57":f,p=e.sideColor,y=void 0===p?"#880015":p,d=I(e,["length","width","frontColor","topColor","sideColor"]);return B(this,o),(t=r.call(this,R({},d))).length=c,t.width=s,t.frontColor=l,t.topColor=h,t.sideColor=y,t.type=i.SE,t.hitbox={x:c/2,y:-c/2,width:s,height:s},t}return o}(r.Z);var Z=n(232)},915:(t,e,n)=>{"use strict";n.d(e,{hY:()=>r,ey:()=>o,JA:()=>i,SE:()=>c,Xw:()=>a});var r="TEXTURE",o="TEXREGION",i="RECT",c="ISOCUBE",a="CIRCLE"},282:(t,e,n)=>{"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>a});const a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.events=e.reduce((function(t,e){return t[e]=[],t}),{}),Object.assign(this,n)}var e,n;return e=t,(n=[{key:"on",value:function(t,e){if(!this.events[t])throw new Error('attempting to listen to an unknown event: "'.concat(t,'"'));this.events[t].push(e)}},{key:"once",value:function(t,e){e.once=!0,this.on(t,e)}},{key:"off",value:function(t,e){if(!e)return this.events[t]=[];this.events[t]=this.events[t].filter((function(t){return t!==e}))}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var c=r(this.events[t]);c.forEach((function(n){n.apply(void 0,o),n.once&&e.off(t,n)}))}}])&&c(e.prototype,n),t}()},529:(t,e,n)=>{"use strict";n.d(e,{LP:()=>u,qj:()=>w,EJ:()=>O,EO:()=>A,$e:()=>j,SF:()=>x,mn:()=>P,Uz:()=>S,uF:()=>k,aZ:()=>_,vD:()=>I});var r,o,i,c=(r=[0,0].map((function(){return{x:0,y:0,width:0,height:0}})),o=0,function(t,e,n,i){return r[o=0===o?1:0].x=t,r[o].y=e,r[o].width=n,r[o].height=i,r[o]}),a=(i={x:0,y:0},function(t,e){return i.x=t,i.y=e,i}),s=function(){var t=[0,0].map((function(){return{x:0,y:0,radius:0}})),e=0;return function(n,r,o){return t[e=0===e?1:0].x=n,t[e].y=r,t[e].radius=o,t[e]}}();function u(t){var e=t.hitbox,n=t.hitcirc;return t.hitbox?{x:e.x+e.width/2,y:e.y+e.height/2}:t.hitcirc?{x:n.x,y:n.y}:{x:t.width/2,y:t.height/2}}var l=function(t){return t.x},f=function(t,e){return t.x-e.width},h=function(t,e){return t.x+(t.width-e.width)},p=function(t){return t.x+t.width},y=function(t,e){return t.x+(t.width-e.width)/2},d=function(t){return t.y},b=function(t,e){return t.y-e.height},v=function(t,e){return t.y+(t.height-e.height)},m=function(t){return t.y+t.height},g=function(t,e){return t.y+(t.height-e.height)/2};function w(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=a(o,i);switch(n){case"left":c.x+=l(t);break;case"center":c.x+=y(t,e);break;case"right":c.x+=h(t,e);break;default:throw new Error("Invalid x-alignment parameter: ".concat(n))}switch(r){case"top":c.y+=d(t);break;case"center":c.y+=g(t,e);break;case"bottom":c.y+=v(t,e);break;default:throw new Error("Invalid y-alignment parameter: ".concat(r))}return c}function O(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=a(r,o);switch(n){case"top-start":i.x+=l(t),i.y+=b(t,e);break;case"top":i.x+=y(t,e),i.y+=b(t,e);break;case"top-end":i.x+=h(t,e),i.y+=b(t,e);break;case"right-start":i.x+=p(t),i.y+=d(t);break;case"right":i.x+=p(t),i.y+=g(t,e);break;case"right-end":i.x+=p(t),i.y+=v(t,e);break;case"bottom-start":i.x+=l(t),i.y+=m(t);break;case"bottom":i.x+=y(t,e),i.y+=m(t);break;case"bottom-end":i.x+=h(t,e),i.y+=m(t);break;case"left-start":i.x+=f(t,e),i.y+=d(t);break;case"left":i.x+=f(t,e),i.y+=g(t,e);break;case"left-end":i.x+=f(t,e),i.y+=v(t,e);break;default:throw new Error("Invalid stacking direction: ".concat(n))}return i}var A=function(t){for(var e=t[0],n=e.x,r=e.y,o=e.width,i=e.height,a=c(n,r,o,i),s=1;s<t.length;s++){var u=t[s],l=Math.max(a.x+a.width,u.x+u.width),f=Math.max(a.y+a.height,u.y+u.height);a.x=Math.min(a.x,u.x),a.y=Math.min(a.y,u.y),a.width=l-a.x,a.height=f-a.y}return a},j=function(t,e,n){switch(n){case"x":return{width:t.width+e.width,height:Math.max(t.height,e.height)};case"y":return{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)};default:throw new Error("Invalid combine direction: ".concat(n))}};function x(t){var e=C(t);return t.hitbox?c(e.x+t.hitbox.x,e.y+t.hitbox.y,t.hitbox.width,t.hitbox.height):c(e.x,e.y,t.width,t.height)}function P(t){return t.hitbox?t.hitbox:c(0,0,t.width,t.height)}function S(t){var e=C(t);return s(e.x+t.hitCirc.x,e.y+t.hitCirc.y,t.hitCirc.radius)}function k(t,e){for(var n,r=t.parent;r;)n=e-r.pos.x,r=r.parent;t.pos.x=n}function _(t,e){for(var n,r=t.parent;r;)n=e-r.pos.y,r=r.parent;t.pos.y=n}function C(t){for(var e=t.pos.x,n=t.pos.y;t.parent;)e+=(t=t.parent).pos.x,n+=t.pos.y;return a(e,n)}var R=function(t){return t.w?t.w:t.width},E=function(t){return t.h?t.h:t.height};function I(t){if(!t.children)return{width:0,height:0};var e=t.children[0],n={minX:e.pos.x,minY:e.pos.y,maxX:e.pos.x+R(e),maxY:e.pos.y+E(e)},r=t.children.reduce((function(t,e){return{minX:Math.min(t.minX,e.pos.x),minY:Math.min(t.minY,e.pos.y),maxX:Math.max(t.maxX,e.pos.x+R(e)),maxY:Math.max(t.maxY,e.pos.y+E(e))}}),n);return{width:r.maxX-r.minX,height:r.maxY-r.minY}}},32:(t,e,n)=>{"use strict";n.d(e,{TN:()=>r,QC:()=>o,d4:()=>i,uZ:()=>c,Xx:()=>a,nP:()=>u,bh:()=>l,Ht:()=>f,ex:()=>h,ge:()=>p,rA:()=>y,z4:()=>d});var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+Math.floor((t-e+1)*Math.random())},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+(t-e)*Math.random()},i=function(t){return t[r(t.length-1)]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return Math.min(e,Math.max(t,n))},a=function(t){return 0===t?1:t/Math.abs(t)},s=function(t,e){return Math.floor(t*e)/e},u=function(t,e){return t*t+e*e},l={linear:function(t){return t},quadIn:function(t){return t*t},quadOut:function(t){return 1-this.quadIn(t-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return 1-this.cubicIn(1-t)},smoothStep:function(t){return t*t*(3-2*t)}},f=function(t,e){return!(s(t.x+t.width,1e4)<=s(e.x,1e4)||s(t.x,1e4)>=s(e.x+e.width,1e4)||s(t.y+t.height,1e4)<=s(e.y,1e4)||s(t.y,1e4)>=s(e.y+e.height,1e4))},h=function(t,e){return!(t.x+t.width<=e.x||t.x>=e.x+e.width||t.y+t.height<=e.y||t.y>=e.y+e.height)},p=function(t,e){var n=t.radius+e.radius,r=t.x+t.radius/2-(e.x+e.radius/2),o=t.y+t.radius/2-(e.y+e.radius/2);return r*r+o*o<=n*n},y=function(t,e){var n=e.x+e.radius-c(t.x,t.x+t.width,e.x+e.radius),r=e.y+e.radius-c(t.y,t.y+t.height,e.y+e.radius),o=n*n+r*r;return Math.round(o)<e.radius*e.radius},d=function(t,e){var n=Math.abs(Math.atan(t/e));return e>0&&t<0?-n:e<0&&t<0?Math.PI+n:e<0&&t>0?Math.PI-n:e>0&&t>0?n:0===t&&e>0?0:0===t&&e<0?Math.PI:0===e&&t>0?Math.PI/2:0===e&&t<0?-Math.PI/2:void 0}},43:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var a=0;a<t.length;a++){var s=[].concat(t[a]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},921:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,o=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],c=!0,a=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){a=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],c=o[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),u="/*# ".concat(s," */"),l=c.sources.map((function(t){return"/*# sourceURL=".concat(c.sourceRoot||"").concat(t," */")}));return[i].concat(l).concat([u]).join("\n")}return[i].join("\n")}},146:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:()=>d});const u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(u,t);var e,n,r=(e=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=a(e);if(n){var o=a(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return i(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s(c(e=r.call(this,["change"],t())),"x",0),s(c(e),"y",0),window.addEventListener("resize",(function(){var n=t();Object.assign(c(e),n),e.emit("change",c(e))})),e}return u}(n(282).Z);var l=1024,f=768,h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),p={viewport:new u((function(){var t=window.innerWidth,e=window.innerHeight,n=e>t;if(h)return{width:n?t:Math.max(.7*t,e),height:n?Math.max(.7*e,t):e};var r=n?f:l,o=n?l:f;return{width:Math.min(t,r),height:Math.min(e,o)}})),storageId:"jshdf190",worldWidth:1e3,worldHeight:window.innerHeight,gravity:1700,isMobile:h,scale:!1,get devicePixelRatio(){return Math.min(h?1.5:1,window.devicePixelRatio)},orientation:"portrait"};function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const d=(b={SDKStrat:null,StorageStrat:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,n;return e=t,(n=[{key:"get",value:function(){return localStorage.getItem(this.key)}},{key:"set",value:function(t){localStorage.setItem(this.key,t)}}])&&y(e.prototype,n),t}(),showAdOnRestart:0,showAdOnResume:0,prerollAd:!1},Object.assign(p,b));var b},661:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._1ABys8-8-_OHSD1WgNfrCA {\r\n    transition: opacity 0.25s linear;\r\n}","",{version:3,sources:["webpack://./src/entities/Player/style.css"],names:[],mappings:"AAAA;IACI,gCAAgC;AACpC",sourcesContent:[".ctrlBtn {\r\n    transition: opacity 0.25s linear;\r\n}"],sourceRoot:""}]),c.locals={ctrlBtn:"_1ABys8-8-_OHSD1WgNfrCA"};const a=c},1:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,'.kBnvNgbdaWjN1JUPehZVl {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr {\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n._2lHPVtCDOcovWkCo9WuhBr:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n._1ggU-0hgNAcU2DVOMJWQLZ {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.lc0jbG1_QuFCjZS3-gers {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.fqfOAOxskjZ7CSpKGysjL {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n._2cCNjRBGCgpzkmR8i4dm_7 {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.eI9EvLtxVH2HaEV7XABKr {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n._1niWA6rwv5zoeCHQyf8yAz {\r\n    color: #e0c6e0;\r\n}\r\n._2chNllMXrIThEnxJvtvvow {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.Z2wV4tFi4P3HcME7xm0vV {\r\n    display: none;\r\n}\r\n._3Z4Q7kHHX6KEBKSpcobAx4 {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n',"",{version:3,sources:["webpack://./src/screens/Game/initUI/style.css"],names:[],mappings:"AAAA;IACI,mBAAmB;IACnB,cAAc;IACd,sBAAsB;IACtB,cAAc;IACd,iBAAiB;IACjB,gCAAgC;AACpC;AACA;IAEI,cAAc;IACd,iBAAiB;IACjB,kBAAkB;IAClB,gBAAgB;IAChB,kBAAkB;IAClB,kBAAkB;IAClB,sBAAsB;AAC1B;AACA;IACI,WAAW;IACX,kBAAkB;IAClB,SAAS;IACT,SAAS;IACT,kBAAkB;IAClB,mBAAmB;IACnB,uDAAuD;AAC3D;AACA;IACI,sBAAsB;IACtB,cAAc;IACd,eAAe;IACf,mBAAmB;IACnB,iBAAiB;IACjB,gCAAgC;IAChC,kBAAkB;AACtB;AACA;IACI,UAAU;IACV,gCAAgC;AACpC;AACA;IACI,kBAAkB;IAClB,mBAAmB;IACnB,UAAU;IACV,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;IACd,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,cAAc;AAClB;AACA;IACI,UAAU;IACV,6BAA6B;AACjC;AACA;IACI,aAAa;AACjB;AACA;IACI,6BAA6B;IAC7B,UAAU;IACV,aAAa;AACjB",sourcesContent:['.txt {\r\n    white-space: nowrap;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.tooltip {\r\n    composes: txt;\r\n    color: #ffe6d5;\r\n    background: black;\r\n    margin-left: -16px;\r\n    font-size: 1.5em;\r\n    padding: 10px 16px;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n}\r\n.tooltip:before {\r\n    content: "";\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 50%;\r\n    border-width: 12px;\r\n    border-style: solid;\r\n    border-color: black transparent transparent transparent;\r\n}\r\n.timer {\r\n    font-family: monospace;\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    letter-spacing: 2px;\r\n    user-select: none;\r\n    transition: opacity 0.25s linear;\r\n    border-radius: 5px;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.25s linear;\r\n}\r\n.overlay {\r\n    border-radius: 5px;\r\n    background: #333366;\r\n    opacity: 0;\r\n    z-index: 1;\r\n    transition: opacity 1s linear;\r\n}\r\n.time {\r\n    color: #ffe6d5;\r\n    font-size: 16px;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.timeVal {\r\n    color: #fa664b;\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.recTimeVal {\r\n    color: #e0c6e0;\r\n}\r\n.continue {\r\n    z-index: 2;\r\n    transition: opacity 1s linear;\r\n}\r\n.dead {\r\n    display: none;\r\n}\r\n.blurOverlay {\r\n    background:rgba(0, 0, 0, 0.5); \r\n    z-index: 1;\r\n    display: none;\r\n}\r\n'],sourceRoot:""}]),c.locals={txt:"kBnvNgbdaWjN1JUPehZVl",tooltip:"_2lHPVtCDOcovWkCo9WuhBr kBnvNgbdaWjN1JUPehZVl",timer:"_1ggU-0hgNAcU2DVOMJWQLZ",hidden:"lc0jbG1_QuFCjZS3-gers",overlay:"fqfOAOxskjZ7CSpKGysjL",time:"_2cCNjRBGCgpzkmR8i4dm_7",timeVal:"eI9EvLtxVH2HaEV7XABKr",recTimeVal:"_1niWA6rwv5zoeCHQyf8yAz",continue:"_2chNllMXrIThEnxJvtvvow",dead:"Z2wV4tFi4P3HcME7xm0vV",blurOverlay:"_3Z4Q7kHHX6KEBKSpcobAx4"};const a=c},806:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._2dxZo1LuY05qYQk5cWBGAj {\r\n    transform: scale(-1, 1);\r\n}\r\n._3vdgYio4yaebTL7u79N62v {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n._22uFm83qwojCfg8hmv6Yql {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n._34sI9l4leBq2HWmVtVKMz5 {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n._33T254Eh2ILhm_nusDbjXu {\r\n    transition: opacity linear 0.250s;\r\n}\r\n._3H227XjaA5OSILiuNsLx2P:hover {\r\n    opacity: 1;\r\n}\r\n.aA9CxtPMIYcN-bXcV3l_i {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n._1B0xVLXoPlp_en5mM907su {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.UbeNJHa88KANlX_8vZHCY {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n","",{version:3,sources:["webpack://./src/screens/Level/style.css"],names:[],mappings:"AAAA;IACI,uBAAuB;AAC3B;AACA;IACI,cAAc;IACd,cAAc;IACd,sBAAsB;IACtB,gBAAgB;IAChB,mBAAmB;IACnB,UAAU;IACV,iBAAiB;AACrB;AACA;IACI,gBAAgB;IAChB,cAAc;AAClB;AACA;IACI,iCAAiC;IACjC,UAAU;AACd;AACA;IACI,iCAAiC;AACrC;AACA;IACI,UAAU;AACd;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;IACtB,mBAAmB;AACvB;AACA;IACI,UAAU;IACV,+BAA+B;AACnC;AACA;IACI,aAAa;IACb,gBAAgB;IAChB,sBAAsB;AAC1B",sourcesContent:[".prevBtn {\r\n    transform: scale(-1, 1);\r\n}\r\n.infoTitle {\r\n    color: #ffe6d5;\r\n    font-size: 2em;\r\n    font-family: monospace;\r\n    font-weight: 700;\r\n    white-space: nowrap;\r\n    z-index: 1;\r\n    user-select: none;\r\n}\r\n.infoSub {\r\n    font-size: 1.2em;\r\n    color: #eabeac;\r\n}\r\n.icon {\r\n    transition: opacity linear 0.125s;\r\n    opacity: 0;\r\n}\r\n.startBtn {\r\n    transition: opacity linear 0.250s;\r\n}\r\n.playBtn:hover {\r\n    opacity: 1;\r\n}\r\n.error {\r\n    color: tomato;\r\n    font-size: 1.5em;\r\n    font-family: monospace;\r\n    white-space: nowrap;\r\n}\r\n.hidden {\r\n    opacity: 0;\r\n    transition: opacity 0.5s linear;\r\n}\r\n.retry {\r\n    color: silver;\r\n    font-size: 1.5em;\r\n    font-family: momospace;\r\n}\r\n"],sourceRoot:""}]),c.locals={prevBtn:"_2dxZo1LuY05qYQk5cWBGAj",infoTitle:"_3vdgYio4yaebTL7u79N62v",infoSub:"_22uFm83qwojCfg8hmv6Yql",icon:"_34sI9l4leBq2HWmVtVKMz5",startBtn:"_33T254Eh2ILhm_nusDbjXu",playBtn:"_3H227XjaA5OSILiuNsLx2P",error:"aA9CxtPMIYcN-bXcV3l_i",hidden:"_1B0xVLXoPlp_en5mM907su",retry:"UbeNJHa88KANlX_8vZHCY"};const a=c},673:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._2jdDmJpB0m2pgCwnQXkXp0 {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n._3jHrN0bUvMonJnX0kLE_H5 {\r\n    letter-spacing: 0;\r\n}","",{version:3,sources:["webpack://./src/screens/Loading/style.css"],names:[],mappings:"AAAA;IACI,eAAe;IACf,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IACnB,mBAAmB;AACvB;AACA;IACI,iBAAiB;AACrB",sourcesContent:[".txt {\r\n    font-size: 16px;\r\n    color: #ffe6d5;\r\n    font-family: monospace;\r\n    letter-spacing: 4px;\r\n    white-space: nowrap;\r\n}\r\n.info {\r\n    letter-spacing: 0;\r\n}"],sourceRoot:""}]),c.locals={txt:"_2jdDmJpB0m2pgCwnQXkXp0",info:"_3jHrN0bUvMonJnX0kLE_H5"};const a=c},731:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(921),o=n.n(r),i=n(43),c=n.n(i)()(o());c.push([t.id,"._35YmgIRdM1rGTagRZdiMWH {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n._5nb22jczr2iRQl6GzsxhG {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: uP3_D0Wi7V8GXgXu0IENq;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n._3lEQuyyX-I9YTwqE1mHS1o {\r\n    animation-delay: 0s;\r\n}\r\n._1h3b1j-Uhme2WBBixZS7-Z {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.bancwqSaH-c4kiW34bN3V {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes uP3_D0Wi7V8GXgXu0IENq {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.-P5MQXKbIsmfEcxD8zhki {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.-P5MQXKbIsmfEcxD8zhki:hover, .-P5MQXKbIsmfEcxD8zhki:active, .-P5MQXKbIsmfEcxD8zhki:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}","",{version:3,sources:["webpack://./src/screens/ui/style.css"],names:[],mappings:"AAAA;IACI,6BAA6B;IAC7B,eAAe;IACf,gCAAgC;AACpC;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,mBAAmB;IACnB,qCAAuB;IACvB,yBAAyB;IACzB,mCAAmC;AACvC;AACA;IACI,mBAAmB;AACvB;AACA;IACI,sBAAsB;IACtB,iBAAiB;AACrB;AACA;IACI,qBAAqB;IACrB,iBAAiB;AACrB;AACA;IACI,KAAK,WAAW;IAChB,OAAO,WAAW;AACtB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;IAChB,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,iBAAiB;IACjB,sBAAsB;IACtB,mBAAmB;IACnB,iBAAiB;AACrB;AACA;IACI,mCAAmC;AACvC",sourcesContent:[".imgBtn {\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n.loadingDot {\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    background: #ffe6d5;\r\n    animation-name: loading;\r\n    animation-duration: 0.75s;\r\n    animation-iteration-count: infinite;\r\n}\r\n.dotA {\r\n    animation-delay: 0s;\r\n}\r\n.dotB {\r\n    animation-delay: 0.25s;\r\n    margin-left: 16px;\r\n}\r\n.dotC {\r\n    animation-delay: 0.5s;\r\n    margin-left: 32px;\r\n}\r\n@keyframes loading {\r\n    0% { opacity: 0 }\r\n    100% { opacity: 1 }\r\n}\r\n\r\n.playBtn {\r\n    background: #eeeeee;\r\n    font-size: 1.5em;\r\n    color: #e15c22;\r\n    padding: 0.55em;\r\n    border-radius: 0.2em;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n    font-family: monospace;\r\n    letter-spacing: 1px;\r\n    user-select: none;\r\n}\r\n.playBtn:hover, .playBtn:active, .playBtn:focus {\r\n    box-shadow: 0px 0px 3px 3px #7a371c;\r\n}"],sourceRoot:""}]),c.locals={imgBtn:"_35YmgIRdM1rGTagRZdiMWH",loadingDot:"_5nb22jczr2iRQl6GzsxhG",loading:"uP3_D0Wi7V8GXgXu0IENq",dotA:"_3lEQuyyX-I9YTwqE1mHS1o",dotB:"_1h3b1j-Uhme2WBBixZS7-Z",dotC:"bancwqSaH-c4kiW34bN3V",playBtn:"-P5MQXKbIsmfEcxD8zhki"};const a=c},562:(t,e,n)=>{t.exports=n.p+"assets/4bc6c5eceed5628a254811c7b2db7dca.cson"},284:(t,e,n)=>{t.exports=n.p+"assets/fb607d786a14a6be1b0f0c947e5ba6c9.mp3"},343:(t,e,n)=>{t.exports=n.p+"assets/5ea22db127bf58d7edacd4e27de15128.cson"},126:(t,e,n)=>{t.exports=n.p+"assets/8d5b69f4aa3fb86a73b9adac5fc89c68.png"},987:(t,e,n)=>{t.exports=n.p+"assets/48b0df5de1822d037c3e0da1056d5ea0.png"},524:(t,e,n)=>{t.exports=n.p+"assets/2a19667466be46c7b96d969d0f68f723.png"},399:(t,e,n)=>{t.exports=n.p+"assets/ec8b65d405f50357bf99224c24ad7e2e.png"},210:(t,e,n)=>{t.exports=n.p+"assets/3c92faa2a2f84dc5a4a752de743a7521.png"},976:(t,e,n)=>{t.exports=n.p+"assets/6d20d50c4325d374f53558afe76267a1.png"},229:(t,e,n)=>{t.exports=n.p+"assets/74d1202a0fc2f45361702ef9520989af.png"},73:(t,e,n)=>{t.exports=n.p+"assets/667305c7749f4cc363a07c4cedcc4e58.png"},315:(t,e,n)=>{t.exports=n.p+"assets/e864417a5cd342b1fe190beed41cd2f3.png"},224:(t,e,n)=>{t.exports=n.p+"assets/0ca9736dc31ac025b4a21bf7942a86fc.png"},102:(t,e,n)=>{t.exports=n.p+"assets/80b7b67277fabe5881e19db3ae8d119a.cson"},942:(t,e,n)=>{t.exports=n.p+"assets/629a0261aa38809f626b97c75c2cd20d.cson"},559:(t,e,n)=>{t.exports=n.p+"assets/2ab079ae3be2650c6b6ecc57f34ce603.cson"},867:(t,e,n)=>{t.exports=n.p+"assets/1db215397ce4431cbba8cbecd2c00849.cson"},671:(t,e,n)=>{t.exports=n.p+"assets/e7043f79214f629e8df091157cf1368c.cson"},799:(t,e,n)=>{t.exports=n.p+"assets/3e6ada5a8b0bc5f97b91808d80f07e0a.cson"},235:(t,e,n)=>{t.exports=n.p+"assets/237fdf5291631726096a3395d7de5bef.cson"},818:(t,e,n)=>{t.exports=n.p+"assets/a1cd47cc40d4ae810ca77f9a7e9b79a4.cson"},508:(t,e,n)=>{t.exports=n.p+"assets/98d1121390135652ce1243461363d583.cson"},644:(t,e,n)=>{t.exports=n.p+"assets/f728efa8df13fb51278b6bf604a4e975.cson"},994:(t,e,n)=>{"use strict";var r,o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function c(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function a(t,e){for(var n={},r=[],o=0;o<t.length;o++){var a=t[o],s=e.base?a[0]+e.base:a[0],u=n[s]||0,l="".concat(s," ").concat(u);n[s]=u+1;var f=c(l),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==f?(i[f].references++,i[f].updater(h)):i.push({identifier:l,updater:d(h,e),references:1}),r.push(l)}return r}function s(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var c=o(t.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(e)}return e}var u,l=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var i=document.createTextNode(o),c=t.childNodes;c[e]&&t.removeChild(c[e]),c.length?t.insertBefore(i,c[e]):t.appendChild(i)}}function h(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,y=0;function d(t,e){var n,r,o;if(e.singleton){var i=y++;n=p||(p=s(e)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(e),r=h.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=c(n[r]);i[o].references--}for(var s=a(t,e),u=0;u<n.length;u++){var l=c(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=s}}}}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";var t=n(571);var e=n(674),r="col-rects",o=Math.PI/4,i=3*Math.PI/4,c="obj-layer",a="offline";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p="undefined"!=typeof AudioContext&&"null"!=typeof AudioContext;const y=p?function(){var t=new AudioContext,e=function(){function e(n){var r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.loop,c=void 0!==i&&i,a=o.volume,u=void 0===a?1:a,l=o.pan,f=void 0===l?0:l,h=o.speed,p=void 0===h?1:h;s(this,e),this.buffer=n,this.panNode=t.createStereoPanner(),this.volumeNode=t.createGain(),this.panNode.pan.value=f,this.volumeNode.gain.value=u,this._speed=p,this._loop=c,this.playedFrom=0,this.offset=0,this.playTill=n.duration,this.lastPlayedAt=0,this.playing=!1,this.onEnded=function(){return r.playing=!1},e.onCreated(this)}return l(e,null,[{key:"getPaused",value:function(){return this._on}},{key:"off",value:function(){this._on=!1}},{key:"on",value:function(){this._on=!0}},{key:"onCreated",value:function(){}},{key:"onDestroyed",value:function(){}},{key:"destroy",value:function(t){e.onDestroyed(t)}}]),l(e,[{key:"pause",value:function(){if(this.playing){var e=t.currentTime-this.lastPlayedAt,n=this.offset+e,r=this.playTill-this.playedFrom;this.offset=this.loop?n%r:Math.min(n,r),this._stop()}}},{key:"resume",value:function(){if(!this.playing&&e._on){var t=this.playedFrom+this.offset,n=this.playTill-t;this._play(t,n)}}},{key:"play",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(!this.playing&&e._on){o&&(this.volume=o);var i=r||this.buffer.duration;this.playedFrom=n,this.offset=0,this.playTill=n+i,this.lastPlayedAt=t.currentTime,this._play(n,i)}}},{key:"_stop",value:function(){var t=this.sourceNode;t&&t.stop(0)}},{key:"_play",value:function(e,n){var r,o=this.buffer,i=this.panNode,c=this.volumeNode,a=this._loop,s=this._speed,u=t.createBufferSource(),l=(r=u,function(t,e,n){if(r.loop)return r.loopStart=e,r.loopEnd=e+n,r.start(t,e);r.start(t,e,n)});this.sourceNode=u,this.lastPlayedAt=t.currentTime,u.buffer=o,u.loop=a,u.playbackRate.value=s,u.connect(i),i.connect(c),c.connect(t.destination),l(t.currentTime,e,n),u.onended=this.onEnded,this.playing=!0}},{key:"speed",set:function(t){this._speed=t,this.sourceNode&&this.sourceNode.playbackRate.setValueAtTime(t,0)}},{key:"volume",set:function(t){this.volumeNode.gain.setValueAtTime(t,0)}},{key:"pan",set:function(t){this.panNode.pan.setValueAtTime(t,0)},get:function(){this.panNode.pan.value}}]),e}();return f(e,"_on",!0),f(e,"loadResource",(function(e){return new Promise((function(n,r){fetch(e).then((function(t){return t.arrayBuffer()})).then((function(e){return function(e){return new Promise((function(n,r){t.decodeAudioData(e,n,r)}))}(e)})).then((function(t){return n(t)})).catch((function(){return r({message:a})}))}))})),e}():(b=d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"off",value:function(){}},{key:"on",value:function(){}},{key:"destroy",value:function(){}}],(n=[{key:"pause",value:function(){}},{key:"resume",value:function(){}},{key:"play",value:function(){}}])&&h(e.prototype,n),r&&h(e,r),t}(),g=function(t){return Promise.resolve(t)},(m="loadResource")in(v=d)?Object.defineProperty(v,m,{value:g,enumerable:!0,configurable:!0,writable:!0}):v[m]=g,b);var d,b,v,m,g;function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const A=function(){function n(t){var r=this,o=t.renderer,i=t.assetsCache,c=t.screenFactories,a=t.activeScreen;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),O(this,"_activeScreen",null),O(this,"_sounds",[]),O(this,"paused",!1),O(this,"pausedSounds",[]),this._assetsCache=i,this.renderer=o,Object.keys(c).forEach((function(t){var e=c[t];r[t]=e(r),r[t].name=t})),e.Z.injectAssetsCache(i),y.onCreated=function(t){r._sounds.push(t)},y.onDestroyed=function(t){r._sounds=r._sounds.filter((function(e){return e!==t}))},a&&this.switchScreen(a)}var r,o;return r=n,(o=[{key:"switchScreen",value:function(t){var e;this._activeScreen&&this._activeScreen.onExit(),this._activeScreen=this[t],this.renderer.scene=this._activeScreen,this._activeScreen.background&&this.renderer.changeBackground(this._activeScreen.background);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this._activeScreen).onEnter.apply(e,r)}},{key:"disposeScreen",value:function(t){this[t.name]=null}},{key:"_update",value:function(t,e){this._activeScreen.update&&this._activeScreen.update(t,e)}},{key:"start",value:function(){this.loopControls=function(e){var n=e.mainUpdateFn,r=void 0===n?function(){}:n,o=e.renderer,i=e.step,c=void 0===i?100:i,a=0,s=1,u=!1;return requestAnimationFrame((function e(n){var i=s*Math.min(n-a,c)/1e3,l=n/1e3;if(a=n,u)return requestAnimationFrame(e);o.scene.update?o.scene.update(i,l):t.Z.updateRecursively(o.scene,i,l,o.scene),r(i,l),o.renderRecursively(),requestAnimationFrame(e)})),{pause:function(){u=!0},resume:function(){u=!1},setSpeed:function(t){s=t},get meta(){return{elapsed:a/1e3}}}}({mainUpdateFn:function(){},renderer:this.renderer})}},{key:"stopSounds",value:function(){this._sounds.forEach((function(t){t.pause()}))}},{key:"pauseSounds",value:function(){this.pausedSounds=this._sounds.filter((function(t){return t.playing})),this._sounds.forEach((function(t){t.pause()}))}},{key:"turnOffSound",value:function(){this.stopSounds(),y.off()}},{key:"turnOnSound",value:function(){y.on()}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.loopControls.pause(),this.pauseSounds())}},{key:"resume",value:function(){this.paused&&(this.paused=!1,this.loopControls.resume(),this.pausedSounds.forEach((function(t){t.resume()})))}},{key:"reset",value:function(){this.paused=!1,this.loopControls.resume(),this.pausedSounds=null}},{key:"assetsCache",get:function(){return this._assetsCache}}])&&w(r.prototype,o),n}();function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),t}const S=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;if(j(this,t),this.domNode=e||r.querySelector(n),!this.domNode)throw new Error("one or more invalid constructor parameters");if(this.domNode.getBoundingClientRect&&(this.x=0,this.y=0,!e)){var o=this.domNode.getBoundingClientRect(),i=o.width,c=o.height;this.width=i,this.height=c}}return P(t,null,[{key:"query",value:function(e,n){return new t(null,e,n)}},{key:"create",value:function(e){return new t(document.createElement(e))}},{key:"bounds",value:function(t){return t.domNode.getBoundingClientRect()}}]),P(t,[{key:"get",value:function(e){return t.query(e,this.domNode)}},{key:"hide",value:function(){this.domNode.style.opacity=0}},{key:"show",value:function(){this.domNode.style.opacity=1}},{key:"clear",value:function(){this.content=""}},{key:"on",value:function(t,e){this.domNode.addEventListener(t,e)}},{key:"off",value:function(t,e){this.domNode.removeEventListener(t,e)}},{key:"add",value:function(t){return this.domNode.appendChild(t.domNode||t),this}},{key:"classList",get:function(){return this.domNode.classList}},{key:"pos",set:function(t){var e=t.x,n=t.y;e&&(this.x=e,this.domNode.style.left="".concat(e,"px")),n&&(this.y=n,this.domNode.style.top="".concat(n,"px"))}},{key:"content",set:function(t){this.domNode.innerHTML=t}}]),t}();var k=n(915),_=n(379),C=n(146),R=n(529),E="canvas",I="webgl";function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){M(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const X=function(){function t(e){var n=e.cnvQry,r=e.scene,o=e.viewport,i=e.background,c=void 0===i?"#ffffff":i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,"api",E);var a=document.querySelector(n);this.canvas=a,this.scene=r,this.ctx=a.getContext("2d"),this.changeBackground(c),this.resize(o),o.on("change",this.resize.bind(this))}var e,n;return e=t,(n=[{key:"changeBackground",value:function(t){this.canvas.style.background=t}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.canvas.setAttribute("width",e*C.Z.devicePixelRatio),this.canvas.setAttribute("height",n*C.Z.devicePixelRatio),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px")}},{key:"setTexatlas",value:function(t,e){this.img=t,this.meta=e}},{key:"render",value:function(t){switch(this.ctx.translate(t.smooth?t.pos.x:Math.round(t.pos.x),t.smooth?t.pos.y:Math.round(t.pos.y)),t.initialRotation&&(this.ctx.rotate(t.initialRotation),this.ctx.translate(t.initialPivotX,0)),t.anchor&&this.ctx.translate(t.anchor.x,t.anchor.y),t.rotation&&this.ctx.rotate(t.rotation),t.anchor&&this.ctx.translate(-t.anchor.x,-t.anchor.y),t.pivot&&this.ctx.translate(t.pivot.x,t.pivot.y),t.scale&&this.ctx.scale(t.scale.x,t.scale.y),t.type){case k.ey:var e=this.meta[t.frame];this.ctx.drawImage(this.img,e.x,e.y,t.w,t.h,0,0,t.w,t.h);break;case k.hY:this.ctx.drawImage(t.img,0,0);break;case k.JA:t.fill&&(this.ctx.fillStyle=t.fill,this.ctx.fillRect(0,0,t.width,t.height)),t.stroke&&(this.ctx.strokeStyle=t.stroke,this.ctx.lineWidth=t.strokeWidth,this.ctx.strokeRect(0,0,t.width,t.height))}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),t.alpha&&(this.ctx.globalAlpha=t.alpha),t.blendMode&&(this.ctx.globalCompositeOperation=t.blendMode),this.render(t),t.debug){var e=t.hitbox||(0,R.mn)(t);this.ctx.save(),this.render(new _.Z(T(T({pos:T({},e)},e),{},{stroke:"red",strokeWidth:1}))),this.ctx.restore()}if(t.children)for(var n=0,r=t.children.length;n<r;n++)this.renderRecursively(t.children[n]);this.ctx.restore()}}}])&&D(e.prototype,n),t}(),Z=function(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Couldn't compile shader: ".concat(t.getShaderInfoLog(r)));return r};function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e&&N(t.prototype,e),n&&N(t,n),t}var L=function(){function t(){Y(this,t),this.tMat=t.create(),this.sMat=t.create(),this.rMat=t.create()}return U(t,null,[{key:"create",value:function(){return[1,0,0,0,1,0,0,0,1]}},{key:"cast",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}}]),U(t,[{key:"scaled",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.sMat;return n[0]=t,n[4]=e,n}},{key:"rotated",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.rMat;return r[0]=n,r[1]=e,r[3]=-e,r[4]=n,r}},{key:"translated",value:function(t,e){var n=this.tMat;return n[6]=t,n[7]=e,n}}]),t}();const z=function(){function t(){Y(this,t),this.iMat=new L,this.temp=this.create()}return U(t,[{key:"create",value:function(){return L.create()}},{key:"identity",value:function(t){return L.cast(t)}},{key:"multiply",value:function(t,e){var n=this.temp;n[0]=t[0]*e[0]+t[1]*e[3]+t[2]*e[6],n[1]=t[0]*e[1]+t[1]*e[4]+t[2]*e[7],n[2]=t[0]*e[2]+t[1]*e[5]+t[2]*e[8],n[3]=t[3]*e[0]+t[4]*e[3]+t[5]*e[6],n[4]=t[3]*e[1]+t[4]*e[4]+t[5]*e[7],n[5]=t[3]*e[2]+t[4]*e[5]+t[5]*e[8],n[6]=t[6]*e[0]+t[7]*e[3]+t[8]*e[6],n[7]=t[6]*e[1]+t[7]*e[4]+t[8]*e[7],n[8]=t[6]*e[2]+t[7]*e[5]+t[8]*e[8];for(var r=0;r<9;r++)e[r]=n[r]}},{key:"rotate",value:function(t,e){return this.multiply(this.iMat.rotated(e),t)}},{key:"scale",value:function(t,e,n){return this.multiply(this.iMat.scaled(e,n),t)}},{key:"translate",value:function(t,e,n){return this.multiply(this.iMat.translated(e,n),t)}}]),t}();function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const H=function(){function t(e){var n=e.image,r=e.cnvQry,o=e.viewport,i=e.scene,c=e.clearColor,a=void 0===c?[0,0,0,0]:c,s=e.background,u=void 0===s?"#000000":s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),F(this,"api",I),F(this,"defBlend","source-over"),F(this,"defTint",[0,0,0,0]);var l=function(t){var e=document.querySelector(t).getContext("webgl2");if(!e)throw new Error("Webgl support not available");return e}(r),f=function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error("Couldnt link shaders: ".concat(t.getProgramInfoLog(r)));return r}(l,Z(l,"   #version 300 es\n\n    in vec2 vert_pos;\n    \n    uniform mat3 mat;\n    uniform mat3 tex_mat;\n\n    out vec2 tex_coords;\n\n    void main() {\n        \n        tex_coords = (tex_mat * vec3(vert_pos, 1)).xy;\n        \n        gl_Position = vec4((mat * vec3(vert_pos, 1)).xy, 0, 1);\n    }\n",l.VERTEX_SHADER),Z(l,"   #version 300 es\n    precision highp float;\n    \n    in vec2 tex_coords;\n    \n    uniform sampler2D tex_unit;\n    uniform bool overlay;\n    uniform vec3 overlay_col;\n    uniform vec4 g_tint;\n    uniform vec4 tint;\n    uniform float alpha;\n\n    out vec4 out_color;\n    void main() {\n        vec4 px_col = texture(tex_unit, tex_coords);\n        if (overlay) {\n            out_color = vec4(overlay_col, px_col.a * alpha);\n            return;\n        } \n        out_color = vec4((px_col + g_tint + tint).rgb, px_col.a * alpha);\n    }\n",l.FRAGMENT_SHADER));this.canvas=document.querySelector(r),this.image=n,this.gl=l,this.program=f;var h,p=l.getAttribLocation(f,"vert_pos"),y=l.createBuffer();this.uMat=l.getUniformLocation(f,"mat"),this.uTexMat=l.getUniformLocation(f,"tex_mat"),this.uOverlay=l.getUniformLocation(f,"overlay"),this.uOverlayCol=l.getUniformLocation(f,"overlay_col"),this.uTint=l.getUniformLocation(f,"tint"),this.uGTint=l.getUniformLocation(f,"g_tint"),this.uAlpha=l.getUniformLocation(f,"alpha"),this.matrixUtil=new z,this.texMat=this.matrixUtil.create(),l.bindBuffer(l.ARRAY_BUFFER,y),l.bufferData(l.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),l.STATIC_DRAW),l.enableVertexAttribArray(p),l.vertexAttribPointer(p,2,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,null),l.useProgram(f),this.gl.enable(this.gl.BLEND),this.overlay=!1,this.alpha=1,this.gTint=this.defTint,this.blendMode=this.defBlend,this.overlay=!1,this.clearColor=a,this.scene=i,this.changeBackground(u),o.on("change",this.resize.bind(this)),Object.assign(this,((h={mStack:[]}).mStack.push(L.create()),h.curMatIdx=0,h.curMat=h.mStack[0],h.firstMat=h.mStack[0],h.save=function(){this.curMatIdx+=1,this.mStack[this.curMatIdx]=this.mStack[this.curMatIdx]||L.create(),this.curMat=this.mStack[this.curMatIdx];for(var t=this.mStack[this.curMatIdx-1],e=0;e<9;e++)this.curMat[e]=t[e]},h.restore=function(){if(0===this.curMatIdx)throw new Error("couldn't restore state: no save point could be found");this.curMatIdx-=1,this.curMat=this.mStack[this.curMatIdx]},h)),this.resize(o)}var e,n;return e=t,(n=[{key:"setTexatlas",value:function(t,e){var n=this.gl,r=this.program,o=n.createTexture(),i=n.getUniformLocation(r,"tex_unit");this.meta=e,this.image=t,n.activeTexture(n.TEXTURE0+0),n.uniform1i(i,0),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.generateMipmap(n.TEXTURE_2D)}},{key:"translate",value:function(t,e){this.matrixUtil.translate(this.curMat,t,e)}},{key:"rotate",value:function(t){this.matrixUtil.rotate(this.curMat,t)}},{key:"scale",value:function(t,e){this.matrixUtil.scale(this.curMat,t,e)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"changeBackground",value:function(t){t&&(this.canvas.style.background=t)}},{key:"resize",value:function(t){var e=t.width,n=t.height,r=Math.round(e*C.Z.devicePixelRatio),o=Math.round(n*C.Z.devicePixelRatio);this.canvas.setAttribute("width",r),this.canvas.setAttribute("height",o),this.gl.viewport(0,0,r,o),this.canvas.style.width="".concat(e,"px"),this.canvas.style.height="".concat(n,"px"),this.matrixUtil.identity(this.firstMat),this.matrixUtil.scale(this.firstMat,1,-1),this.matrixUtil.translate(this.firstMat,-1,-1),this.matrixUtil.scale(this.firstMat,2/r,2/o)}},{key:"render",value:function(t){var e=t.rotation,n=t.anchor;if(this.translate(Math.round(t.pos.x),Math.round(t.pos.y)),t.initialRotation&&(this.rotate(t.initialRotation),this.translate(t.initialPivotX,0)),e&&(n&&this.translate(n.x,n.y),this.rotate(e),n&&this.translate(-n.x,-n.y)),t.scale&&this.scale(t.scale.x,t.scale.y),t.blendMode,t.frame){var r=Array.isArray(t.frame),o=this.meta[t.frame],i=r?t.frame[0]:o.x,c=r?t.frame[1]:o.y,a=r?t.frame[2]:t.w,s=r?t.frame[3]:t.h,u=this.matrixUtil,l=this.texMat,f=this.uMat,h=this.uTexMat,p=this.image,y=this.gl;this.scale(a,s),u.identity(l),u.translate(l,i/p.width,c/p.height),u.scale(l,a/p.width,s/p.height),y.uniformMatrix3fv(f,!1,this.curMat),y.uniformMatrix3fv(h,!1,l),y.drawArrays(y.TRIANGLES,0,6),this.scale(1/a,1/s)}}},{key:"renderRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.scene;if(t._visible){if(t===this.scene&&this.clear(),this.save(),t.blendMode&&(this.blendMode=t.blendMode),t.alpha&&(this.alpha=t.alpha),t.overlay&&(this.overlay=t.overlay),t.tint&&(this.tint=t.tint),this.render(t),t.children)for(var e=0,n=t.children.length;e<n;e++)this.renderRecursively(t.children[e]);t.overlay&&(this.overlay=!1),t.tint&&(this.tint=this.defTint),t.alpha&&(this.alpha=1),t.blendMode&&(this.blendMode=this.defBlend),this.restore()}}},{key:"clearColor",set:function(t){var e;(e=this.gl).clearColor.apply(e,function(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))}},{key:"alpha",set:function(t){this.gl.uniform1f(this.uAlpha,t)}},{key:"gTint",set:function(t){this.gl.uniform4fv(this.uGTint,t)}},{key:"tint",set:function(t){this.gl.uniform4fv(this.uTint,t)}},{key:"blendMode",set:function(t){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"overlay",set:function(t){this.gl.uniform1i(this.uOverlay,t?1:0),t&&this.gl.uniform3fv(this.uOverlayCol,t)}}])&&q(e.prototype,n),t}();var W,J=n(282);function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q=y.loadResource,K=Object.freeze({SOUND:"SOUND",IMAGE:"IMAGE",DATA:"DATA"}),$=(G(W={},K.SOUND,Q),G(W,K.IMAGE,(function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e(r)},r.onerror=function(){return n({message:a})}}))})),G(W,K.DATA,(function(t){return new Promise((function(e,n){fetch(t).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n({message:a})}))}))})),W);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rt(t,e){return!e||"object"!==tt(e)&&"function"!=typeof e?ot(t):e}function ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=it(r);if(o){var n=it(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return rt(this,t)});function c(){var t,e,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),r={},(n="assets")in(e=ot(t=i.call(this,["prog","prog-end","load","error"])))?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=c,(n=[{key:"load",value:function(t){var e=this,n=t.length,r=Promise.resolve();t.reduce((function(t,r,o){return t.then((function(){var t="string"==typeof r?r:r.url;return function(t){var e=function(t){return t.match(/.(jpe?g)|(png)$/)?K.IMAGE:t.match(/.(mp3)|(wav)|(ogg)$/)?K.SOUND:t.match(/.(cson|bson)$/)?K.DATA:void 0}(t);return(0,$[e])(t)}(t).then((function(i){e.assets[t]=i,e.emit("prog",(o+1)/n,r.msg)}))}))}),r).then((function(){e.emit("prog-end"),e.emit("load"),e.off("prog")})).catch((function(t){e.emit("error",t)}))}},{key:"unload",value:function(t){this.assets[t]=null}},{key:"get",value:function(t){return this.assets[t]}}])&&et(e.prototype,n),c}(J.Z);var at=n(739);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pt=function(t,e){var n=Number(t);if(0!==n&&!n)throw new Error("Attempting to set invalid ".concat(e,": ").concat(t));return n};const yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ht(r);if(o){var n=ht(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ft(this,t)});function c(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,["orb-update","music-update","sound-update"])).strat=t;var n=t.get();return e.data=n?JSON.parse(n):{curLevel:1,orbCount:6,hiscores:{},music:!0,sound:!0},e}return e=c,(n=[{key:"setNum",value:function(t,e){var n=pt(e,t);return this.data[t]=n,this.save(this.data),n}},{key:"setCurLevel",value:function(t){this.setNum("curLevel",t)}},{key:"setOrbCount",value:function(t){var e=this.setNum("orbCount",t);this.emit("orb-update",e)}},{key:"setHiscore",value:function(t,e){var n=pt(e,"hiscore");this.data.hiscores[String(t)]=n,this.save(this.data)}},{key:"getCurLevel",value:function(){return this.data.curLevel}},{key:"getOrbCount",value:function(){return this.data.orbCount}},{key:"getHiscore",value:function(t){return this.data.hiscores[String(t)]}},{key:"getMusic",value:function(){return this.data.music}},{key:"setMusic",value:function(t){this.data.music=t,this.emit("music-update",this.data.music),this.save(this.data)}},{key:"getSound",value:function(){return this.data.sound}},{key:"setSound",value:function(t){this.data.sound=t,this.emit("sound-update",this.data.sound),this.save(this.data)}},{key:"save",value:function(t){this.strat.set(JSON.stringify(t))}}])&&ut(e.prototype,n),c}(J.Z);function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bt(this,"periodBetweenAds",45e3),bt(this,"adLastPlayedAt",Date.now()-45e3),this.strat=e}var e,n;return e=t,(n=[{key:"rvaSupported",value:function(){return!!this.strat&&this.strat.rva}},{key:"setLoadProg",value:function(t){this.strat&&this.strat.setLoadProg(t)}},{key:"signalLoad",value:function(){return this.strat?this.strat.signalLoad():Promise.resolve()}},{key:"playRva",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.playRva()):Promise.reject()}},{key:"canPlay",value:function(){return Date.now()-this.adLastPlayedAt<this.periodBetweenAds}},{key:"playIntstAd",value:function(){return!this.strat||this.canPlay()?(console.log("Ad throttled: interstitial ad frequency exceeded"),Promise.reject()):(this.adLastPlayedAt=Date.now(),this.strat.playIntstAd())}},{key:"prerollAd",value:function(){return this.strat?(this.adLastPlayedAt=Date.now(),this.strat.prerollAd()):Promise.reject()}},{key:"setOnPause",value:function(t){this.strat&&this.strat.setOnPause(t)}},{key:"setOnResume",value:function(t){this.strat&&this.strat.setOnResume(t)}}])&&dt(e.prototype,n),t}();var mt=n(942),gt=n.n(mt),wt=n(559),Ot=n.n(wt),At=n(867),jt=n.n(At),xt=n(671),Pt=n.n(xt),St=n(799),kt=n.n(St),_t=n(235),Ct=n.n(_t),Rt=n(818),Et=n.n(Rt),It=n(508),Bt=n.n(It);const Tt=[{id:gt(),music:"music3"},{id:Ot(),music:"music2"},{id:jt(),music:"music3"},{id:Pt(),music:"music1"},{id:kt(),music:"music2"},{id:Ct(),music:"music1"},{id:Et(),music:"music3"},{id:Bt(),music:"music2"}];var Dt="LOADING",Mt="MAIN_MENU",Xt="LEVEL",Zt="GAME",Yt=n(994),Nt=n.n(Yt),Ut=n(673);Nt()(Ut.Z,{insert:"head",singleton:!1});const Lt=Ut.Z.locals||{};var zt={width:150,height:25},Vt="info",qt="prog-bar",Ft="prog-ind";function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?Qt(t):e}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const $t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(r);if(o){var n=Kt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Gt(this,t)});function c(t){var e,n,r,o,a=t.game,s=t.assets,u=t.uiRoot,l=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),o="#000000",(r="background")in(n=Qt(e=i.call(this)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e.game=a,e.assets=s,e.uiRoot=u,e.sdk=l,e}return e=c,(n=[{key:"onEnter",value:function(){var t=this,e=this.game.assetsCache;e.load(this.assets);var n=function(t){var e;t.content=(e=Vt,"\n        ".concat(function(t,e,n,r){return'\n        <div id="'.concat("prog-bar",'" style="width: ').concat(t,"px; height: ").concat(e,'px; background: #ffe6d5; z-index: 99999;">\n        </div>\n        <div id="').concat("prog-ind",'" style="width: 4px; height: ').concat(e,'px; background: tomato; z-index: 100000;">\n        </div>\n    ')}(zt.width,zt.height),'\n        <div id="').concat(e,'" class="').concat(Lt.txt," ").concat(Lt.info,'">loading</div>\n        <div id="').concat(e,'" class="').concat(Lt.txt," ").concat(Lt.info,'"></div>\n    '));var n=t.get("#".concat(qt)),r=t.get("#".concat(Ft)),o=t.get("#".concat(Vt)),i=function(t){n.pos=(0,R.qj)(t,zt,"center","center"),r.pos=(0,R.qj)(t,zt,"center","center"),o.pos=(0,R.EJ)(n,S.bounds(o),"bottom",0,20)};return C.Z.viewport.on("change",i),i(C.Z.viewport),{teardown:function(){C.Z.viewport.off("change",i),t.clear()},onProg:function(t,e){r.domNode.style.width="".concat(Math.round(t*zt.width),"px"),o.content="".concat(Math.round(100*t),"%"),i(C.Z.viewport)},onError:function(t){o.content=t&&t.message===a?"Error: Connection Problem":"Error: Unsupported Device",o.domNode.style.color="#d34545",i(C.Z.viewport),console.log(t)},onLoad:function(){t.clear()}}}(this.uiRoot),r=n.teardown,o=n.onProg,i=n.onError,c=n.onLoad;this.teardown=r,this.onProg=o,e.once("load",(function(){c();var e=function(){t.game.switchScreen(Mt)};t.sdk.signalLoad().then(e).catch(e)})),e.on("prog",(function(e){o(e),t.sdk.setLoadProg(Math.round(100*e))})),e.once("error",i)}},{key:"onExit",value:function(){this.game.disposeScreen(this),this.teardown(),this.game.assetsCache.off("prog",this.onProg),this.game.assetsCache.off("error")}}])&&Wt(e.prototype,n),c}(t.Z);function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?oe(t):e}function oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ie(r);if(o){var n=ie(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return re(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this)).logo=new at.Z({frame:"logo"}),t.rock1=new at.Z({frame:"rock1"}),t.rock2=new at.Z({frame:"rock2"}),t.ball=new at.Z({frame:"ball"}),t.ball.pos.x=88,t.ball.pos.y=80,t.rock1.pos.x=200,t.rock2.pos.y+=t.rock2.h/2,t.ball.anchor={x:.75*t.ball.w,y:t.ball.h/2},t.ball.rotation=0,t.rock2.anchor={x:.75*t.rock2.w,y:t.rock2.h/2},t.rock2.rotation=-Math.PI/12,t.rock1.anchor={x:t.rock1.w/2,y:t.rock1.h/2},t.rock1.rotation=Math.PI/6,t.add(t.rock1),t.add(t.rock2),t.add(t.ball),t.add(t.logo),t.alpha=.01,Object.assign(oe(t),(0,R.vD)(oe(t))),t}return e=c,(n=[{key:"update",value:function(t){this.ball.rotation+=t*Math.PI/12,this.alpha=Math.min(1,this.alpha+.5*t)}}])&&ee(e.prototype,n),c}(t.Z);var ae=n(731);Nt()(ae.Z,{insert:"head",singleton:!1});const se=ae.Z.locals||{},ue=function(t,e){return'\n        <div id="'.concat(t,'" class="').concat(se.playBtn,'">').concat(e,"</div>\n    ")};var le="play-btn";function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ye(t,e){return(ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function de(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?be(t):e}function be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ye(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ve(r);if(o){var n=ve(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return de(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.sdk;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),me(be(e=i.call(this)),"background","#000000"),e.game=n,e.uiRoot=r,e.sdk=o,n.assetsCache.once("load",(function(){var t=C.Z.viewport;e.gameTitle=new ce,e.realign=function(t){var n=C.Z.devicePixelRatio;e.gameTitle.pos=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){me(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,R.qj)({x:0,y:0,width:t.width*n,height:t.height*n},{width:e.gameTitle.width,height:e.gameTitle.height},"center","top",15,80))},t.on("change",e.realign),e.realign(t),e.add(e.gameTitle)})),e}return e=c,(n=[{key:"onEnter",value:function(){var t=this.uiRoot,e=this.game,n=this.sdk;this.teardownUI=function(t){var e=t.uiRoot,n=t.onPlay;e.content=ue(le,"PLAY");var r=e.get("#".concat(le)),o=function(t){r.pos=(0,R.qj)(t,r,"center","center",0,0)};return r.on("click",n),C.Z.viewport.on("change",o),o(C.Z.viewport),function(){r.off("click",n),e.clear(),C.Z.viewport.off("change",o)}}({uiRoot:t,onPlay:function(){var r=function(){return e.switchScreen(Xt,!0)};if(t.clear(),!C.Z.prerollAd)return r();n.prerollAd().then(r).catch(r)}})}},{key:"onExit",value:function(){this.teardownUI(),C.Z.viewport.off("change",this.realign)}}])&&pe(e.prototype,n),c}(t.Z);var we=n(32),Oe=n(232);function Ae(t){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){Ee(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Se(t,e,n){return(Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _e(t,e){return!e||"object"!==Ae(e)&&"function"!=typeof e?Ce(t):e}function Ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Re(r);if(o){var n=Re(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _e(this,t)});function c(t){var e,n=t.entYOffset,r=void 0===n?0:n,o=t.tiles,a=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["entYOffset","tiles"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Ee(Ce(e=i.call(this,xe({},a))),"_layoutTiles",(function(){})),Ee(Ce(e),"_tiles",null),e.entYOffset=r,e.tiles=o,e.prevPos={x:0,y:0},e}return e=c,(n=[{key:"setWorld",value:function(t){var e=this,n=t.worldWidth,r=t.worldHeight,o=Math.min(r-this.baseline,(this.bounds.height-this.subject.height)/2),i=this.baseline-this.subject.height/2,c=(0,we.uZ)(0,r-this.bounds.height,i-this.bounds.height/2)*this.pF+this.bounds.height-o,a=o*(1-1/this.z);this.world.width=n,this.world.height=r,this.tiles.forEach((function(t){var n=xe({},t);n.pos={x:t.pos.x,y:c+a-(e.baseline-t.pos.y)+e.entYOffset},e.add(n)}))}},{key:"layoutTiles",value:function(t){var e=this,n=t.width,r=void 0===n?this.world.width:n,o=t.height,i=void 0===o?this.world.height:o,c=t.tiles,a=void 0===c?this.tiles:c;if(i===this.world.height&&a===this.tiles)return this.world.width=r;a!==this.tiles&&(this.tiles=a),this.viewport.off("change",this._layoutTiles),this._layoutTiles=function(){e.children=[],e.setWorld({worldWidth:r,worldHeight:i})},this.viewport.on("change",this._layoutTiles),this._layoutTiles()}},{key:"onRemove",value:function(){Se(Re(c.prototype),"onRemove",this).call(this),this.viewport.off("change",this._layoutTiles)}},{key:"tiles",get:function(){return this._tiles},set:function(t){t&&(this._tiles=t,this.baseline=t.reduce((function(t,e){return Math.max(t,e.pos.y+e.height)}),0))}}])&&Pe(e.prototype,n),c}(Oe.Z);function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Te=function(){function t(e){var n=e.resource,r=e.start,o=e.duration,i=e.size,c=void 0===i?1:i,a=e.loop,s=e.volume,u=e.pan,l=e.speed;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=n,this.start=r,this.duration=o,this.instances=Array(c).fill(new y(n,{loop:a,volume:s,pan:u,speed:l}))}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=function(t){for(var e=t.length-1;e>-1;e--)if(!t[e].playing)return t[e]}(this.instances);if(e)e.play(this.start,this.duration,t);else{var n=new y(this.resource);this.instances.push(n),n.play(this.start,this.duration,t)}}},{key:"pause",value:function(){this.instances.forEach((function(t){t.pause()}))}},{key:"resume",value:function(){this.instances.forEach((function(t){t.resume()}))}}])&&Be(e.prototype,n),t}();function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Me=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mutations=e,this.accessIdx=0}var e,n;return e=t,(n=[{key:"play",value:function(t){var e=this.mutations,n=this.accessIdx;e[n].play(t),this.accessIdx=(n+1)%e.length}},{key:"pause",value:function(){this.mutations((function(t){t.pause()}))}},{key:"resume",value:function(){this.mutations((function(t){t.resume()}))}}])&&De(e.prototype,n),t}();function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach((function(e){Ye(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ue=function(){function t(e){var n=e.resource,r=e.resourceID,o=e.meta;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n)throw new Error("Null audio resource: ".concat(r));this.meta=o,this.resource=n}var e,n;return e=t,(n=[{key:"create",value:function(t,e){var n=this.meta,r=this.resource,o=new y(r,e);return o.play=o.play.bind(o,n[t].start,n[t].duration),o}},{key:"createPool",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Te(Ze(Ze({resource:this.resource},this.meta[t]),e));return n}},{key:"createGroup",value:function(t,e){var n=this,r=t.map((function(t){return n.createPool(t,e)}));return new Me(r)}}])&&Ne(e.prototype,n),t}();function Le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ze=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"makeMovable",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.velX,r=void 0===n?0:n,o=e.velY,i=void 0===o?0:o,c=e.accX,a=e.accY,s=e.fricX,u=e.fricY,l=e.roll;Object.assign(t,{movable:!0,velX:r,velY:i,accX:c,accY:a,fricX:s,fricY:u,roll:l}),l&&(t.rotation=0)}},{key:"updateOffEdge",value:function(t,e){var n=t.offCorner;n.movable&&(t.pos.x+=n.pos.x-n.prevPosX,t.pos.y+=n.pos.y-n.prevPosY);var r=(0,R.Uz)(t),c=(0,R.SF)(n),a=c.x+(1===t.offEdge?c.width:0),s=(a-(r.x+r.radius))/r.radius,u=(c.y-(r.y+r.radius))/r.radius,l=u,f=-s,h=(0,we.z4)(u,s);t.fricX&&(t.velX-=t.fricX*t.velX*e/2);var p=(t.velX*l+20*f)*e/r.radius,y=h+p;switch(t.offEdge){case-1:var d=y>Math.PI/2,b=y<o;(d||b)&&(t.offEdge=0,t.velX*=1.5),b&&(t.velX=-50),d&&(t.pos.y-=.5);break;case 1:var v=y<Math.PI/2;if(v||y>i)return t.offEdge=0,!v&&(t.velX=50),v&&(t.velX*=1.5),v&&(t.pos.y-=.5)}var m=r.radius*(1+Math.cos(y)),g=r.radius*(1+Math.sin(y)),w=t.pos.x;(0,R.uF)(t,a-m),Math.abs(w-t.pos.x),(0,R.aZ)(t,c.y-g),t.rotation+=p}},{key:"update",value:function(t,e){t.accX&&(t.velX+=t.accX*e/2),t.accY&&(t.velY+=t.accY*e/2),t.fricX&&(t.velX+=-t.fricX*t.velX*e/2),t.fricY&&(t.velY*=e/t.fricY),t.roll&&(t.rotation+=t.velX*e/(2*t.radius)),t.pos.x+=t.velX*e,t.pos.y+=t.velY*e}}],null&&Le(e.prototype,null),n&&Le(e,n),t}();function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(n),!0).forEach((function(e){He(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ge(t,e,n){return e&&Je(t.prototype,e),n&&Je(t,n),t}function Qe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ke(t,e)}function Ke(t,e){return(Ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=nn(t);if(e){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tn(this,n)}}function tn(t,e){return!e||"object"!==Ve(e)&&"function"!=typeof e?en(t):e}function en(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rn=function(t){Qe(n,t);var e=$e(n);function n(t){var r,o=t.imgId,i=t.metaId,c=t.frame,a=t.pos,s=t.lifetime,u=t.velX,l=void 0===u?0:u,f=t.velY,h=void 0===f?0:f,p=t.accX,y=t.accY,d=t.alpha,b=t.alphaDecayFn,v=t.rotVel,m=t.loop;return We(this,n),(r=e.call(this,{imgId:o,metaId:i,frame:c,pos:a})).lifetime=s,r.velX0=l,r.velY0=h,r.alpha0=d,r.pos0=Fe({},a),r.alpha=d,r.alphaDecayFn=b,r.elapsed=0,r.loop=m,v&&(r.rotVel=v,r.rotation=0,r.anchor={x:r.w/2,y:r.h/2}),ze.makeMovable(en(r),{velX:l,velY:h,accX:p,accY:y}),r}return Ge(n,[{key:"_reset",value:function(){this.elapsed=0,this.velX=this.velX0,this.velY=this.velY0,this.alpha=this.alpha0,this.pos.x=this.pos0.x,this.pos.y=this.pos0.y,this.rotVel&&(this.rotation=0)}},{key:"update",value:function(t){if(this.elapsed>this.lifetime){if(!this.loop)return;this._reset()}this.elapsed+=t,ze.update(this,t),this.rotVel&&(this.rotation+=this.rotVel*t),this.alphaDecayFn&&(this.alpha=Math.max(.01,1-we.bh[this.alphaDecayFn](this.elapsed/this.lifetime)))}}]),n}(at.Z);const on=function(t){Qe(n,t);var e=$e(n);function n(t){var r,o,i=t.size,c=t.blendMode,a=t.loop,s=void 0!==a&&a,u=t.randomDistribution,l=void 0===u||u,f=t.metaId,h=t.imgId,p=t.params,y=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["size","blendMode","loop","randomDistribution","metaId","imgId","params"]);if(We(this,n),(r=e.call(this,Fe({},y))).blendMode=c,l)o=p.reduce((function(t,e,n){return t.concat(Array(e.weight||1).fill(n))}),[]);else{var d=p.reduce((function(t,e){return t+(e.weight||1)}),0);o=p.reduce((function(t,e,n){return t.concat(Array(Math.round(i*(e.weight||1)/d)).fill(n))}),[])}for(var b=0;b<i;b++){var v=p[l?(0,we.d4)(o):o[b]],m={metaId:f,imgId:h,frame:v.frame,pos:{x:Array.isArray(v.offsetX)?(0,we.TN)(v.offsetX[0],v.offsetX[1]):v.offsetX||0,y:Array.isArray(v.offsetY)?(0,we.TN)(v.offsetY[0],v.offsetY[1]):v.offsetY||0},lifetime:Array.isArray(v.lifetime)?(0,we.QC)(v.lifetime[0],v.lifetime[1]):v.lifetime,velX:Array.isArray(v.velX)?(0,we.TN)(v.velX[0],v.velX[1]):v.velX,velY:Array.isArray(v.velY)?(0,we.TN)(v.velY[0],v.velY[1]):v.velY,accX:Array.isArray(v.accX)?(0,we.TN)(v.accX[0],v.accX[1]):v.accX,accY:Array.isArray(v.accY)?(0,we.TN)(v.accY[0],v.accY[1]):v.accY,alpha:Array.isArray(v.alpha)?(0,we.QC)(v.alpha[0],v.alpha[1]):v.alpha,rotVel:Array.isArray(v.rotVel)?(0,we.QC)(v.rotVel[0],v.rotVel[1]):v.rotVel,alphaDecayFn:v.alphaDecayFn,loop:s};r.add(new rn(m))}return s||(r.lifetime=p.reduce((function(t,e){return Math.max(t,e.lifetime[1])}),0),r.elapsed=0,r._reset=function(){this.remove(!1),this.onDead&&this.onDead(),this.elapsed=0;for(var t=this.children.length-1;t>-1;t--)this.children[t]._reset()},r.update=function(t){this.elapsed+=t,this.elapsed>this.lifetime&&this._reset()}),r}return Ge(n,null,[{key:"feed",value:function(t,e,n){for(var r=0;r<e;r++)for(var o=0,i=t.children.length;o<i;o++)t.children[o].update(n)}}]),n}(t.Z);function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sn(t,e){return(sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t,e){return!e||"object"!==cn(e)&&"function"!=typeof e?ln(t):e}function ln(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sn(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fn(r);if(o){var n=fn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return un(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),hn(ln(t=i.call(this,["pause","over","play","complete","halt"])),"name",null),hn(ln(t),"level",1),hn(ln(t),"elapsed",0),t}return e=c,(n=[{key:"set",value:function(t){this.name=t}},{key:"is",value:function(t){return t===this.name}},{key:"pause",value:function(){this.is("paused")||(this.emit("pause"),this.set("paused"))}},{key:"play",value:function(){this.is("playing")||(this.emit("play"),this.set("playing"))}},{key:"over",value:function(t){this.is("over")||(this.emit("over",t),this.set("over"))}},{key:"complete",value:function(t,e){this.is("completed")||(this.emit("complete",t,e),this.set("completed"))}},{key:"halt",value:function(){this.is("halted")||(this.set("halted"),this.emit("halt"))}}])&&an(e.prototype,n),c}(J.Z),yn=function(t,e,n){return'\n    <div \n        class="'.concat(se.imgBtn," ").concat(n||"",'" \n        id="').concat(t,'" \n        style="width: ').concat(e.width,"px; height: ").concat(e.height,"px; background: url(").concat(e.src,');"\n    >\n    </div>\n    ')};var dn=n(1);Nt()(dn.Z,{insert:"head",singleton:!1});const bn=dn.Z.locals||{};function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mn=20,gn="pause-btn",wn="resume-btn",On="orb-av",An="timer",jn="orb-ind",xn="orb-exp",Pn="orb-exp-ind",Sn="cross-btn",kn="reset-btn",_n="overlay",Cn="pause-overlay",Rn="cur-time-ind",En="cur-time",In="best-time-ind",Bn="best-time",Tn="continue";const Dn=function(t,e,n,r,o,i,c,a,s,u,l,f,h,p,y){t.content=function(t,e){return'\n        <div id="'.concat(Cn,'" class="').concat(bn.blurOverlay,'"></div>\n        ').concat(yn(jn,t.orb,bn.hidden),'\n        <div id="').concat(An,'" class="').concat(bn.timer," ").concat(bn.hidden,'"> 0000:0 </div>\n        <div id="').concat(On,'" class="').concat(bn.txt," ").concat(bn.hidden,'"> ').concat(e," </div>\n        ").concat(yn(gn,t.pause,bn.hidden),"\n        ").concat(yn(wn,t.resume,bn.hidden),"\n        ").concat(yn(Pn,t.orb,bn.hidden),'\n        <div id="').concat(xn,'" class="').concat(bn.txt," ").concat(bn.hidden,'"> &times; ').concat(2,' </div>\n        <div id="').concat("rva",'" class="').concat(bn.tooltip," ").concat(bn.hidden,'" style="font-size: 1.5em"> watch ad to continue</div>\n        ').concat(yn(kn,t.reset,bn.hidden),"\n        ").concat(yn(Sn,t.cross,bn.hidden),"\n    ")}(n,r.getOrbCount());var d=C.Z.isMobile&&e.getCtrlBtns(),b=t.get("#".concat(jn)),v=t.get("#".concat(On)),m=t.get("#".concat(xn)),g=t.get("#".concat(Pn)),w=t.get("#".concat("rva")),O=t.get("#".concat(gn)),A=t.get("#".concat(wn)),j=t.get("#".concat(kn)),x=t.get("#".concat(Sn)),P=t.get("#".concat(An)),k=t.get("#".concat(Cn)),_=function(t,e,n,r,o,i,c,a,s){var u=function(t,e){var n=S.create("div");return n.domNode.setAttribute("class","".concat(se.imgBtn," ").concat(e||"")),n.domNode.setAttribute("style","width: ".concat(t.width,"px; height: ").concat(t.height,"px; background: url(").concat(t.src,");")),n.width=t.width,n.height=t.height,n}(t[e]()?o:i,a?bn.hidden:bn.dead);return u.on("click",(function(){if(r.is("playing")){var a=!t[e]();t[n](a),u.domNode.style.background="url(".concat(a?o.src:i.src,")"),c.play()}})),u}(r,"getSound","setSound",o,n.soundOn,n.soundOff,f,h);t.add(_),d&&t.add(d.left).add(d.right).add(d.axn);var E,I,B=function(t){v.content=t},T=function(){C.Z.isMobile&&(d.left.hide(),d.right.hide(),d.axn.hide())},D=function(t){b.pos=(0,R.qj)(t,b,"left","top",mn,mn),v.pos=(0,R.EJ)(b,v,"right",10),O.pos=(0,R.qj)(t,O,"right","top",-20,mn),_.pos=(0,R.EJ)(O,_,"left",-12.5),P.pos=(0,R.EJ)(O,P,"bottom",0,10),j.pos=(0,R.qj)(t,j,"center","center"),A.pos=(0,R.EJ)(j,A,"top",0,-10),g.pos=(0,R.EJ)(A,g,"right",mn),m.pos=(0,R.EJ)(g,m,"right",10),w.pos=(0,R.EJ)(A,w,"top",0,-15),x.pos=(0,R.EJ)(j,x,"bottom",0,10),function(t){C.Z.isMobile&&(d.left.pos=(0,R.qj)(t,d.left,"left","bottom",mn,-30),d.right.pos=(0,R.EJ)(d.left,d.right,"right",mn),d.axn.pos=(0,R.qj)(t,d.right,"right","bottom",-20,-35))}(t),k.domNode.style.width="".concat(t.width,"px"),k.domNode.style.height="".concat(t.height,"px")},M=function(){A.hide(),j.hide(),x.hide(),g.hide(),m.hide(),_.show(),O.show(),b.show(),v.show(),P.show(),w.hide(),C.Z.isMobile&&(d.left.show(),d.right.show(),d.axn.show())},X=function(){A.show(),j.show(),x.show(),g.hide(),m.hide(),_.hide(),O.hide(),b.hide(),v.hide(),P.hide(),T(),A.domNode.style.background="url(".concat(n.resume.src,")")},Z=function(){var t=s(e.pos.x);A.show(),j.show(),x.show(),_.hide(),O.hide(),P.hide(),T();var o=y.rvaSupported(),i=!!t,c=r.getOrbCount(),a=i&&!(c>=2)&&o,u=i&&!a;return A.domNode.style.background="url(".concat(a?n.rva.src:n.resume.src,")"),a?w.show():u?(g.show(),void m.show()):(b.hide(),void v.hide())},Y=function(e,r){t.clear(),t.content=function(t,e,n){return'\n        <div class="'.concat(bn.overlay," ").concat(bn.hidden,'" id="').concat(_n,'">  </div>\n        <div class="').concat(bn.time," ").concat(bn.hidden,'" id="').concat(Rn,'">finished in:</div>\n        <div class="').concat(bn.timeVal," ").concat(bn.hidden,'" id="').concat(En,'"> ').concat(e.toFixed(2),'s </div>\n        <div class="').concat(bn.time," ").concat(bn.hidden,'" id="').concat(In,'"> record time: </div>\n        <div class="').concat(bn.timeVal," ").concat(bn.recTimeVal," ").concat(bn.hidden,'" id="').concat(Bn,'"> ').concat(0===n||e<n?"new!":n.toFixed(2)+"s"," </div>\n        ").concat(yn(Tn,t,"".concat(bn.hidden," ").concat(bn.continue)),"\n    ")}(n.resume,e,r);var o=t.get("#".concat(_n)),c=t.get("#".concat(Rn)),a=t.get("#".concat(En)),s=t.get("#".concat(In)),u=t.get("#".concat(Bn)),l=t.get("#".concat(Tn));o.domNode.style.width="".concat(C.Z.viewport.width,"px"),o.domNode.style.height="".concat(C.Z.viewport.height,"px"),s.pos=(0,R.qj)(C.Z.viewport,(0,R.$e)(s,u,"x"),"center","center"),u.pos=(0,R.EJ)(s,u,"right",8),c.pos=(0,R.EJ)(s,s,"top-start",0,-8),a.pos=(0,R.EJ)(c,a,"right",8),l.pos=(0,R.EJ)((0,R.EO)([s,u]),l,"bottom",0,16),l.on("click",(function(){var e;l.domNode.remove(),s.domNode.remove(),c.domNode.remove(),u.domNode.remove(),a.domNode.remove(),e=function(){t.clear(),i(!0)},y.playIntstAd().then(e).catch(e)})),o.domNode.style.opacity=.8,c.show(),a.show(),s.show(),u.show(),l.show()},N=(E=function(){var t={_val:!1,setVal:function(t){if(t!==this._val){if(this._val=t,t)return x.domNode.style.display="none",j.domNode.style.display="none",A.domNode.style.display="none",w.domNode.style.display="none",m.domNode.style.display="none",void(g.domNode.style.display="none");x.domNode.style.display="",j.domNode.style.display="",A.domNode.style.display="",w.domNode.style.display="",m.domNode.style.display="none",g.domNode.style.display="none"}},getVal:function(){return this._val}},n=function(t){c(),e.pos.x=t.x,e.pos.y=t.y},i=function(){c(),e.pos.x>1400&&a(),o.elapsed=0,o.play(),u.play(),t.setVal(!1)},f=function(){t.getVal()||(t.setVal(!0),Math.random()<C.Z.showAdOnRestart?y.playIntstAd().then(i).catch(i):i())};return[function(){if(!t.getVal()){var i=s(e.pos.x),c=y.rvaSupported(),a=!!i,h=r.getOrbCount(),p=h>=2,d=a&&!p&&c,b=a&&!d;if(b&&!p)return l.play();if(u.play(),b&&p){t.setVal(!0);var v=function(){r.setOrbCount(h-2),n(i),o.play(),t.setVal(!1)};return Math.random()<C.Z.showAdOnResume&&y.playIntstAd().then(v).catch(v),void v()}if(d){t.setVal(!0);var m=function(){n(i),o.play(),t.setVal(!1)};y.playRva().then(m).catch(m)}else f()}},f]}(),I=2,function(t){if(Array.isArray(t))return t}(E)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(E,I)||function(t,e){if(t){if("string"==typeof t)return vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(t,e):void 0}}(E,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=N[0],L=N[1],z=function(){o.is("paused")||o.is("completed")||(k.domNode.style.display="block",p.pause())},V=function(){o.is("paused")||o.is("completed")||(k.domNode.style.display="none",p.resume())},q=function(t){return o.is("playing")&&"Escape"===t.key?o.pause():o.is("over")&&"Enter"===t.key?U():o.is("paused")&&"Enter"===t.key?o.play():void 0};return C.Z.isMobile||document.addEventListener("keydown",q),window.addEventListener("focus",V),window.addEventListener("blur",z),document.addEventListener("blur",z),document.addEventListener("focus",V),o.on("play",M),o.on("pause",X),o.on("over",Z),o.on("complete",Y),C.Z.viewport.on("change",D),r.on("orb-update",B),O.on("click",(function(){o.is("playing")&&(o.pause(),u.play())})),A.on("click",(function(){if(!o.is("playing")&&!o.is("completed"))return o.is("paused")?(o.play(),u.play()):void U()})),x.on("click",(function(){o.is("playing")||o.is("completed")||(i(!1),u.play())})),j.on("click",(function(){o.is("playing")||o.is("completed")||L()})),D(C.Z.viewport),{teardownUI:function(){C.Z.isMobile||document.removeEventListener("keydown",q),window.removeEventListener("blur",z),window.removeEventListener("focus",V),document.removeEventListener("blur",z),document.removeEventListener("focus",V),C.Z.viewport.off("change",D),r.off("orb-update",B),o.off("play",M),o.off("pause",X),o.off("over",Z),o.off("complete",Y)},updateTimer:function(t){if(o.is("playing")){var e=Math.floor(t),n=Math.floor(10*(t-e)),r=t<10?"000":t<100?"00":t<1e3?"0":"";P.content="".concat(r).concat(e,":").concat(n)}}}};function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Nn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Un(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?qn(t):e}function qn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Hn=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zn(t,e)}(u,e);var n,o,i,a,s=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Fn(i);if(a){var n=Fn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Vn(this,t)});function u(e){var n,o=e.player,i=e.data,a=e.factories,l=void 0===a?{}:a,f=Yn(e,["player","data","factories"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=s.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xn(Object(n),!0).forEach((function(e){Zn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},f));var h=new t.Z({id:r}),p=new t.Z({id:c}),y=new t.Z,d=new t.Z,b={mg:y,world:p,fg:d},v=function(e){var n=t.Z.get(e);if(!n){var r=new t.Z({id:e});return this.add(r),r}return n};p.getGroup=v,y.getGroup=v,d.getGroup=v;var m=function(t,e){var r=b[e];t.forEach((function(t){var e=t.name,i=t.x,c=t.y,a=t.groupId,s=Yn(t,["name","x","y","groupId"]),u=l[e];if(u)(a?r.getGroup(a):r).add(u(i,c,s,o));else{var f=new at.Z({frame:e,pos:{x:i,y:c}});(a?r.getGroup(a):qn(n)).add(f)}}))};return i.collisionRects.forEach((function(e){var n=e.x,r=e.y,o=e.width,i=e.height,c=Yn(e,["x","y","width","height"]),a=new t.Z({pos:{x:n,y:r}});a.width=o,a.height=i,Object.assign(a,c),h.add(a)})),p.add(h),m(i.mgTiles,"mg"),n.add(y),m(i.tiles,"world"),n.add(p),i.spawnPoints.forEach((function(t){var e=t.name,n=t.x,r=t.y,i=t.groupId,c=t.layer,a=void 0===c?"w":c,s=Yn(t,["name","x","y","groupId","layer"]),u=l[e];if(!u)throw new Error("no factory method provided for ".concat(e));var f="mg"===a?y:"fg"===a?d:p;(i?f.getGroup(i):f).add(u(n,r,s,o))})),m(i.fgTiles,"fg"),n.add(d),n.width=i.width,n.height=i.height,n}return n=u,(o=[{key:"resetRecursively",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(t.reset&&t.reset(),t.children){var e,n=Nn(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.resetRecursively(r)}}catch(t){n.e(t)}finally{n.f()}}}}])&&Ln(n.prototype,o),u}(t.Z);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jn(Object(n),!0).forEach((function(e){Qn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $n(t,e,n){return($n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function er(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nr(r);if(o){var n=nr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return er(this,t)});function c(t){var e,n=t.player,r=(t.uiRoot,t.data),o=t.bg,a=t.fbg,s=t.factories,u=(t.levelDataId,t.uiImages,t.onStateChange,t.gameState),l=t.music,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","uiRoot","data","bg","fbg","factories","levelDataId","uiImages","onStateChange","gameState","music"]);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var h=new Hn({data:r,bg:o,fbg:a,player:n,factories:s});return(e=i.call(this,Gn(Gn({},f),{},{world:{width:h.width,height:h.height}}))).gameState=u,e.player=n,e.music=l,e.add(h),e.resetRecursively=function(){h.resetRecursively()},e}return e=c,(n=[{key:"update",value:function(t){if($n(nr(c.prototype),"update",this).call(this,t),this.music)return this.gameState.is("completed")?this.music.playing&&this.music.pause():void(!this.music.playing&&this.music.play())}},{key:"onRemove",value:function(){this.music&&this.music.pause()}}])&&Kn(e.prototype,n),c}(Oe.Z);var or=Object.freeze({RECT:"rectangle",CIRC:"circle",PLANK:"plank"});const ir=function(t){var e=t.hitCirc?or.CIRC:or.RECT;if(e===or.RECT&&!t.hitbox&&!t.width&!t.height)throw new Error("Unable to determine entity shape: \n".concat(JSON.stringify(t,null,3)));return e};var cr=function(t,e){var n=(0,R.Uz)(t),r=(0,R.Uz)(e);return(0,we.ge)(n,r)},ar=function(t,e){return(0,we.rA)((0,R.SF)(e),(0,R.Uz)(t))},sr=function(t,e){return(0,we.rA)((0,R.SF)(t),(0,R.Uz)(e))};const ur=function(t,e,n){var r=ir(t),o=ir(e),i=n&&n.rigid&&n.movable;return r===or.RECT&&o===or.RECT?function(t){var e=t?we.Ht:we.ex;return function(t,n){var r=(0,R.SF)(t),o=(0,R.SF)(n);return e(r,o)}}(i):r===or.CIRC&&o===or.CIRC?cr:r===or.CIRC&&o===or.RECT?ar:r===or.RECT&&o===or.CIRC?sr:void 0};function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yr(t,e){return(yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function dr(t,e){return!e||"object"!==lr(e)&&"function"!=typeof e?br(t):e}function br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const mr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=vr(r);if(o){var n=vr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return dr(this,t)});function c(t){var e,n=t.player,r=t.sound,o=t.storage,a=t.temp,s=void 0!==a&&a,u=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["player","sound","storage","temp"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(n),!0).forEach((function(e){hr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u))).player=n,e.sound=r,e.hitbox={x:5,y:5,width:14,height:14},e.testCol=ur(br(e),n),e.active=!0,e.storage=o,e.temp=s,e}return e=c,(n=[{key:"update",value:function(){if(this.active){var t=this.player.pos.x+this.player.width/2-this.pos.x,e=this.player.pos.y+this.player.width/2-this.pos.y;(0,we.nP)(t,e)>14400||(this.pos.x+=t/30,this.pos.y+=e/30,this.testCol(this,this.player)&&this.player.visible&&(this.sound.play(),this.storage.setOrbCount(this.storage.getOrbCount()+1),this.remove()))}}},{key:"reset",value:function(){this.temp&&this.remove()}},{key:"onRemove",value:function(){this.parent=null}}])&&pr(e.prototype,n),c}(on);function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Or(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jr(t,e){return(jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xr(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?Pr(t):e}function Pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kr=Object.freeze({x:9,y:0,width:93,height:200});const _r=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Sr(r);if(o){var n=Sr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return xr(this,t)});function c(t){var e,n=t.endY,r=t.uSound,o=t.dSound,a=t.speed,s=void 0===a?150:a,u=t.pos,l=t.player,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["endY","uSound","dSound","speed","pos","player"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(n),!0).forEach((function(e){Or(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"gate",pos:u},f))).endY=n,e.startY=u.y,e.initDir=(0,we.Xx)(e.endY-e.startY),e.dir=e.initDir,e.dist=Math.abs(e.endY-e.startY),e.period=e.dist/s,e.t=0,e.uSound=r,e.dSound=o,e.player=l,e.testCol=ur(Pr(e),l),e.hitbox=kr,e}return e=c,(n=[{key:"updatePos",value:function(t){this.t+=t;var e=this.dist*we.bh.cubicIn(this.t/this.period);this.pos.y=(this.dir===this.initDir?this.startY:this.endY)+e*this.dir;var n=1===this.startToEndDir?(0,we.uZ)(this.startY,this.endY,this.pos.y):(0,we.uZ)(this.endY,this.startY,this.pos.y);if(n!==this.pos.y){this.t=0,this.dir*=-1,this.pos.y=n;var r=this.pos.x+this.w/2-this.player.pos.x,o=this.pos.y+this.h/2-this.player.pos.y;if(r*r+o*o>16e4)return;if(1===this.dir)return this.uSound.play();this.dSound.play()}}},{key:"reset",value:function(){this.pos.Y=this.startY,this.velY=this.velY0}},{key:"update",value:function(t){this.updatePos(t),this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&Ar(e.prototype,n),c}(at.Z);function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Er(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ir(t,e,n){return e&&Er(t.prototype,e),n&&Er(t,n),t}function Br(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tr(t,e)}function Tr(t,e){return(Tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zr(t);if(e){var o=Zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mr(this,n)}}function Mr(t,e){return!e||"object"!==Cr(e)&&"function"!=typeof e?Xr(t):e}function Xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yr=Math.PI,Nr=[1.5,2],Ur=[16,36],Lr=[180,180],zr=[0,Yr],Vr=function(t){Br(n,t);var e=Dr(n);function n(){var t,r,o;return Rr(this,n),!0,(o="forceUpdate")in(r=Xr(t=e.call(this,{frame:"wind"})))?Object.defineProperty(r,o,{value:true,enumerable:!0,configurable:!0,writable:!0}):r[o]=true,t.period=(0,we.QC)(Nr[0],Nr[1]),t.amp=(0,we.TN)(Ur[0],Ur[1]),t.height=(0,we.TN)(Lr[0],Lr[1]),t.swirlOffset=(0,we.QC)(zr[0],zr[1]),t.t=0,t}return Ir(n,[{key:"update",value:function(t){this.t+=t;var e=this.t/this.period;this.pos.y=-this.height*we.bh.linear(e),this.pos.x=this.amp*Math.sin(this.swirlOffset+4*Yr*e),this.alpha=1-we.bh.quadOut(e),e>1&&(this.t=0)}}]),n}(at.Z);const qr=function(t){Br(n,t);var e=Dr(n);function n(t,r,o,i){var c;Rr(this,n),(c=e.call(this,t)).pos.x=r-6,c.pos.y=o-9,c.player=i,c.hitbox={x:-25,y:-200,width:50,height:200},c.testCol=ur(Xr(c),i);for(var a=0;a<60;a++)c.add(new Vr);return c.feed(240,1/60),c}return Ir(n,[{key:"feed",value:function(t,e){for(var n=t-1;n>-1;n--)for(var r=this.children.length-1;r>-1;r--)this.children[r].update(e)}},{key:"update",value:function(t){if(this.testCol(this,this.player)&&this.player.visible){var e=this.player.pos.x+this.player.width/2-this.pos.x,n=this.player.pos.y+this.player.width/2-this.pos.y,r=(0,we.nP)(e,n);if(r<4096)return;this.player.controls.switchState("jumping",this.player),this.player.velY-=C.Z.gravity*(r/32400)*t}}},{key:"reset",value:function(){}},{key:"onRemove",value:function(){this.parent=null}}]),n}(t.Z);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e){return(Wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Jr(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Qr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wr(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gr(r);if(o){var n=Gr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Jr(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,t)).tint=[0,0,0,0],e.vel=1,e.tintVal=0,e.forceUpdate=!0,e}return e=c,(n=[{key:"update",value:function(t){this.tintVal+=.2*t*this.vel,this.tintVal>.16?(this.vel=-1,this.tintVal=.16):this.tintVal<0&&(this.vel=1,this.tintVal=0),this.tint[0]=this.tintVal,this.tint[1]=this.tintVal,this.tint[2]=this.tintVal}}])&&Hr(e.prototype,n),c}(at.Z);function Kr(t){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e,n){return e&&to(t.prototype,e),n&&to(t,n),t}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ro(t,e){return!e||"object"!==Kr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oo(t){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=oo(e);if(n){var o=oo(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return ro(this,t)});function o(t,e,n){var i,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return $r(this,o),(i=r.call(this)).invisible=!0,i.delay=c,i.duration=t,i.elapsed=0,i.onTick=e,i.onDone=n,i}return eo(o,null,[{key:"attachedTo",value:function(t){return function(e){return t.add(new o(e))}}}]),eo(o,[{key:"update",value:function(t){if(this.delay>0)this.delay-=t;else{if(this.elapsed+=t,this.elapsed>this.duration)return this.onDone&&this.onDone(),void this.remove();this.onTick&&this.onTick(this.elapsed/this.duration)}}}]),o}(t.Z);function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function so(t,e){return(so=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uo(t,e){return!e||"object"!==co(e)&&"function"!=typeof e?lo(t):e}function lo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fo(t){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ho=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&so(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fo(r);if(o){var n=fo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return uo(this,t)});function c(t,e,n,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(o=i.call(this,{frame:"ball",pos:{x:t,y:e}})).pos0={x:t,y:e},o.player=r,o.tint=[.05,0,-.05,0],o.anchor={x:o.width/2,y:o.height/2},o.radius=o.width/2,o.alpha=.6,Object.assign(lo(o),po(1)),ze.makeMovable(lo(o),{roll:!0}),o.seqs=JSON.parse(n),o.seqIdx=-1,o.seq=null,o.initiated=!1,o.dead=!1,o.testCol=ur(lo(o),r),o.nextSeq(),o}return e=c,(n=[{key:"reset",value:function(){}},{key:"nextSeq",value:function(){var t,e,n,r=this;if(this.seqIdx++,this.seqIdx>this.seqs.length-1)return this.dead=!0,t=this,e=this.alpha,.6,n=function(){return r.remove()},void t.add(new io(.6,(function(n){t.alpha=e*(1-n)}),n));this.seq=this.seqs[this.seqIdx],this.seq.jumpTo?(this.velSign=(0,we.Xx)(this.seq.jumpTo-this.pos.y),this.velY=this.velSign*this.seq.speed,this.velX=this.seq.velX||0,this.accY=this.seq.acc||C.Z.gravity):this.seq.rollTo&&(this.velSign=(0,we.Xx)(this.seq.rollTo-this.pos.x),this.accY=0,this.velX=this.velSign*this.seq.speed,this.velY=0)}},{key:"checkSeq",value:function(){this.seq.jumpTo?this.pos.y*this.velSign>this.seq.jumpTo*this.velSign&&(this.pos.y=this.seq.jumpTo,this.nextSeq()):this.seq.rollTo&&this.pos.x*this.velSign>this.seq.rollTo*this.velSign&&(this.pos.x=this.seq.rollTo,this.nextSeq())}},{key:"update",value:function(t){if(!this.dead){if(this.updateFlash(t),this.initiated)return ze.update(this,t),void this.checkSeq();this.initiated=this.testCol(this,this.player)}}}])&&ao(e.prototype,n),c}(n(391).TexRegion),po=function(t){return{alpha:.7,elapsed:0,period:t||.6,updateFlash:function(t){if(this.elapsed+=t,this.elapsed>this.period)switch(this.elapsed=0,this.alpha){case.7:this.alpha=.6;break;case.6:this.alpha=.7}}}};const yo=ho;function bo(t){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function go(t,e){return(go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wo(t,e){return!e||"object"!==bo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&go(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Oo(r);if(o){var n=Oo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return wo(this,t)});function c(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100;return vo(this,c),(r=i.call(this,{frame:n,pos:{x:t,y:e}})).fromX=t,r.fromY=e,r.toX=o,r.toY=a,r.velX=o-t==0?0:(0,we.Xx)(o-t)*s,r.velY=a-e==0?0:(0,we.Xx)(a-e)*s,r.clampX0=r.fromX<r.toX?r.fromX:r.toX,r.clampX1=r.toX>r.fromX?r.toX:r.fromX,r.clampY0=r.fromY<r.toY?r.fromY:r.toY,r.clampY1=r.toY>r.fromY?r.toY:r.fromY,r}return e=c,(n=[{key:"update",value:function(t){var e=this.pos.x+this.velX*t,n=this.pos.y+this.velY*t;this.pos.x=(0,we.uZ)(this.clampX0,this.clampX1,e),this.pos.y=(0,we.uZ)(this.clampY0,this.clampY1,n),this.pos.x!==e&&(this.velX*=-1),this.pos.y!==n&&(this.velY*=-1)}}])&&mo(e.prototype,n),c}(at.Z);function jo(t){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function So(t,e,n){return(So="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ro(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _o(t,e){return!e||"object"!==jo(e)&&"function"!=typeof e?Co(t):e}function Co(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ro(t){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Eo=Math.PI;const Io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ro(r);if(o){var n=Ro(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return _o(this,t)});function c(t,e,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,u=arguments.length>6?arguments[6]:void 0;return xo(this,c),(r=i.call(this,t,e,n,o,a,s)).anchor={x:r.width/2,y:r.height/2},r.player=u,r.radius=r.width/2,r.hitCirc={x:0,y:0,radius:r.radius},r.rotation=0,r.testCol=ur(Co(r),u),(r.velX||r.velY)&&(r.forceUpdate=!0),r}return e=c,(n=[{key:"update",value:function(t){var e=(this.velX-this.velY)*t/(2*this.radius);So(Ro(c.prototype),"update",this).call(this,t),this.rotation+=e||Eo*t,this.testCol(this,this.player)&&this.player.visible&&this.player.explode()}}])&&Po(e.prototype,n),c}(Ao);function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function To(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Do(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xo(t,e,n){return(Xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uo(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Zo(t,e){return(Zo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yo(t,e){return!e||"object"!==Bo(e)&&"function"!=typeof e?No(t):e}function No(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uo(t){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lo=24,zo=48;const Vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zo(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Uo(r);if(o){var n=Uo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Yo(this,t)});function c(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,u=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,f=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],h=arguments.length>9?arguments[9]:void 0,p=arguments.length>10?arguments[10]:void 0;Do(this,c);var y=u?"vlhd":"hlhd",d=u?"vlbod":"hlbod",b=u?2:Lo,v=u?Lo:10,m=u?0:zo,g=u?zo:0;(n=i.call(this,t,e,y,r,o,a)).player=h;for(var w=0;w<s;w++){var O=new at.Z({frame:d});O.pos.x+=b+m*w,O.pos.y+=v+g*w,O.alpha=f?1:0,n.add(O)}return n.hitbox={x:u?2:0,y:u?0:2,width:u?12:Lo+zo*s,height:u?Lo+zo*s:Lo},n.testCol=ur(No(n),n.player),n.on=f,l&&(n.period=l,n.t=0,n.sounds=p),n}return e=c,(n=[{key:"update",value:function(t){if(Xo(Uo(c.prototype),"update",this).call(this,t),this.elapsed+=t,this.testCol(this,this.player)&&this.player.visible&&this.on&&this.player.explode(),this.period&&(this.t+=t,this.t>this.period)){this.on=!this.on,this.t=0;var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return To(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?To(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}(this.children);try{for(n.s();!(e=n.n()).done;)e.value.alpha=this.on?1:0}catch(t){n.e(t)}finally{n.f()}var r=this.pos.x-this.player.pos.x,o=this.pos.y-this.player.pos.y;if(r*r+o*o>9e4)return;if(this.on)return void this.sounds.on.play();this.sounds.off.play()}}}])&&Mo(e.prototype,n),c}(Ao);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ho(t,e){return(Ho=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wo(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?Jo(t):e}function Jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Go(t){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ho(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Go(r);if(o){var n=Go(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Wo(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Qo(Jo(n=i.call(this,t)),"_player",null),Qo(Jo(n),"testCol",null),on.feed(Jo(n),120,.02),n.hitbox={x:-20,width:40,y:-15,height:17},n.onTouch=e,n}return e=c,(n=[{key:"reset",value:function(){}},{key:"update",value:function(){this.player&&this.testCol(this,this.player)&&(this.pos.x,this.pos.y,this.remove(),this.onTouch())}},{key:"onRemove",value:function(){this.parent=null}},{key:"player",get:function(){return this._player},set:function(t){this._player||(this._player=t,this.testCol=ur(this,t))}}])&&Fo(e.prototype,n),c}(on);function $o(t){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ri(t,e){return!e||"object"!==$o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oi(t){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ii="lcr1",ci=["lcr2","lcr3"];const ai=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(s,e);var n,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=oi(o);if(i){var n=oi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ri(this,t)});function s(t,e,n,r,o){var i,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:75,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],f=arguments.length>8?arguments[8]:void 0;return ti(this,s),(i=a.call(this,{frame:ii,pos:{x:t,y:e}})).dmgFacs=n,i.orbPool=r,i.player=f,i.sounds=o,i.luck=c,i.temp=l,i.setDamage(u),i.reset=function(){i.alpha=1,i.setDamage(u)},i}return n=s,(r=[{key:"setDamage",value:function(t){if(this.damage=(0,we.uZ)(0,ci.length,t),this.damage>0)return this.frame=ci[this.damage-1];this.frame=ii}},{key:"takeDamage",value:function(t){Math.abs(t)<300||(this.damage++,this.sounds.crack.play(),this.damage>ci.length?this.break(t):this.frame=ci[this.damage-1])}},{key:"break",value:function(e){this.temp?this.remove():this.alpha=0;var n=e>0?"down":"up",r=this.dmgFacs[n].create();if(r.pos.x=this.pos.x,r.pos.y=this.pos.y,this.sounds.snap.play(),Math.random()<this.luck/100){var o=this.orbPool.create(this.pos.x-6+this.width/2,this.pos.y-6+this.height/2,null,this.player);o.active=!1,o.add(new io(.6,null,(function(){o.active=!0}))),t.Z.get(c).add(o)}t.Z.get(c).add(r)}}])&&ei(n.prototype,r),s}(at.Z);function si(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const ui=function(){function t(e){var n=e.factory,r=e.size,o=e.free,i=e.reset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.factory=n,this.size=r,this.free=o,this.reset=i,this.list=Array(r).fill(!1),this.lastIdx=0}var e,n;return e=t,(n=[{key:"create",value:function(){this.lastIdx=(this.lastIdx+1)%this.list.length;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.list[this.lastIdx]?(this.reset&&this.reset.apply(this,[this.list[this.lastIdx]].concat(e)),this.free&&this.free(this.list[this.lastIdx])):this.list[this.lastIdx]=this.factory.apply(this,e);var r=this.list[this.lastIdx];return r}}])&&si(e.prototype,n),t}();function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pi(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?yi(t):e}function yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function di(t){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const bi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=di(r);if(o){var n=di(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return pi(this,t)});function c(t,e,n,r,o){var a,s,u,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),l={x:2,y:0,width:86,height:88},(u="hitbox")in(s=yi(a=i.call(this,{pos:{x:t,y:e},frame:"crane"})))?Object.defineProperty(s,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[u]=l,a.prevPosY=a.pos.y,a.prevPosX=a.pos.x,a.mat="metal",a.movable=!0,a.dispY=r-e,a.distX=n-t,a.meanX=t,a.meanY=e,a.period=o,a.t=0,a}return e=c,(n=[{key:"update",value:function(t){this.t+=t,this.pos.y=this.meanY+we.bh.smoothStep(this.t/this.period)*this.dispY,this.t>this.period&&(this.meanY=this.meanY+this.dispY,this.pos.y=this.meanY,this.dispY*=-1,this.t=0),this.velY=(this.pos.y-this.prevPosY)/t}}])&&fi(e.prototype,n),c}(at.Z);var vi=n(644),mi=n.n(vi);function gi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Oi=Object.freeze({oneOff:!1,resolveX:function(t,e,n,r){var o=(0,R.SF)(e),i=(0,R.mn)(t);t.velX=r?t.velX:0,r&&(e.unduePosXUpdate=.5*n),n>0?(0,R.uF)(t,o.x-i.width-i.x):(0,R.uF)(t,o.x+o.width-i.x)},resolveY:function(t,e,n){var r=(0,R.SF)(e),o=(0,R.mn)(t);t.velY=0,n>0?(0,R.aZ)(t,r.y-o.height-o.y):(0,R.aZ)(t,r.y+r.height-o.y)}}),Ai=Object.freeze({oneOff:!1,resolveX:function(t,e,n){if(!t.offEdge){var r=(0,R.SF)(e),o=(0,R.Uz)(t),i=t.hitCirc,c=(0,we.uZ)(r.y,r.y+r.height,o.y+o.radius),a=0;if(c===r.y||c===r.y+r.height){var s=Math.abs(c-(o.y+o.radius));a=o.radius-Math.sqrt(o.radius*o.radius-s*s)}var u=t.pos.x,l=n-(e.movable?e.pos.x-e.prevPosX:0);l>0?(0,R.uF)(t,r.x-i.x-2*o.radius+a):(0,R.uF)(t,r.x+r.width-i.x-a);var f=(l+(t.pos.x-u))/l;t.velX=a?(0,we.Xx)(t.velX):0,t.rotation=t.prevRot+f*(t.rotation-t.prevRot)}},resolveY:function(t,e,n){if(!t.offEdge){var r=(0,R.SF)(e),c=t.hitCirc,a=(0,R.Uz)(t),s=(0,we.uZ)(r.x,r.x+r.width,a.x+a.radius),u=n-(e.movable?e.pos.y-e.prevPosY:0),l=0;if(s===r.x||s===r.x+r.width){var f=Math.abs(s-(a.x+a.radius));l=a.radius-Math.sqrt(a.radius*a.radius-f*f)}if(t.velY=e.movable&&e.velY>0?e.velY:0,u>0){var h=!1;if(l){var p=s===r.x?-1:1;if((0,we.Xx)(t.velX)===p)t.velX+=2*p,h=!0;else{t.offEdge=p,t.offCorner=e;var y=(0,we.z4)(r.y-(a.y+a.radius),r.x+(1===p?r.width:0)-(a.x+a.radius));(-1===p&&y<o||1===p&&y>i)&&(t.velX=p*Math.max(175,Math.abs(t.velX)))}}return(0,R.aZ)(t,r.y-c.y-2*a.radius+l),h}(0,R.aZ)(t,r.y+r.height-c.y-l)}}});function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const xi=function(){function e(n){var r=this,o=n.entity,i=n.block,c=n.blocks,a=n.onHit,s=void 0===a?function(){}:a,u=n.rigid,l=void 0!==u&&u,f=n.movable,h=void 0===f||f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.entity=o,this.oneToOne=Boolean(i)&&!Boolean(c),this.onHit=s,this.block=i,this.blocks=c,this.evaluateUpdateFn=function(){var e=t.Z.get(r.blocks),n=t.Z.get(r.block),o=r.oneToOne?n:e&&e.children[0];if(o)return r.testFn=ur(r.entity,o,{rigid:l,movable:h}),function(t,e,n){var r=n.rigid,o=n.collision;if(!r)return function(){return o.test(o.onHit)};var i=function(t,e,n){var r=ir(t),o=ir(e);if(r===or.RECT&&o===or.RECT)return Oi;if(r===or.CIRC&&o===or.RECT)return Ai;throw new Error("No resolver found for shapes ".concat(r," and ").concat(o))}(t,e);return i.oneOff?function(){o.test((function(e){i.resolve(t,e),o.onHit(e)}))}:function(){var e=t.pos.x-t.prevPosX,n=t.pos.y-t.prevPosY;t.pos.y=t.prevPosY,o.test((function(n){var r=t.velX;i.resolveX(t,n,e),o.onHit(n,r,0,!(t.pos.x===t.prevPosX))}),!0),t.pos.y+=n,o.test((function(e){var r=t.velY;if(i.resolveY(t,e,n))return t.onFall&&t.onFall();o.onHit(e,0,r,!(t.pos.y===t.prevPosY))}),!1)}}(r.entity,o,{rigid:l,movable:h,collision:r})}}var n,r;return n=e,(r=[{key:"resolve",value:function(t,e,n){var r=n&&t.movable?t.pos.y-t.prevPosY:0;t.pos.y-=r,0!==t.alpha&&this.testFn(this.entity,t)&&e(t),t.pos.y+=r}},{key:"test",value:function(e,n){if(this.oneToOne){var r=t.Z.get(this.block);this.resolve(r,e,n)}else{var o=t.Z.get(this.blocks);if(o)for(var i=o.children.length-1;i>-1;i--){var c=o.children[i];this.resolve(c,e,n)}}}},{key:"update",value:function(){var t=this.evaluateUpdateFn();t&&(this.update=t,this.evaluateUpdateFn=null,t())}}])&&ji(n.prototype,r),e}();function Pi(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Si(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Si(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function Si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ki(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _i=function(t){var e=t.which||t.keyCode;if("number"==typeof e)return e;switch(t.key){case"Left":case"ArrowLeft":return 37;case"Right":case"ArrowRight":return 39;case"Up":case"ArrowUp":return 38;case"A":case"a":return 65;case"D":case"d":return 68;case"W":case"w":return 87;case" ":return 32;default:return-1}};const Ci=function(){function t(e){var n=this;for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.keys={},e){var o=e[r];if(Array.isArray(o)){var i,c=Pi(o);try{for(c.s();!(i=c.n()).done;){var a=i.value;this.keys[a]={pressed:!1,held:!1}}}catch(t){c.e(t)}finally{c.f()}}else this.keys[o]={pressed:!1,held:!1}}this.keysArr=Object.values(this.keys),this.keysLen=this.keysArr.length,document.addEventListener("keydown",(function(t){var e=_i(t),r=n.keys[e];r&&(r.held=!0,r.pressed=!0)})),document.addEventListener("keyup",(function(t){var e=_i(t),r=n.keys[e];r&&(r.held=!1)})),document.addEventListener("blur",this.resetAll.bind(this)),window.addEventListener("blur",this.resetAll.bind(this))}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held",r=this.mappings[t];return Array.isArray(r)?r.find((function(t){return!0===e.keys[t][n]})):this.keys[r][n]}},{key:"reset",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1}},{key:"resetAll",value:function(){for(var t=this.keysLen-1;t>-1;t--)this.keysArr[t].pressed=!1,this.keysArr[t].held=!1}}])&&ki(e.prototype,n),t}();function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const Ei=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mappings=e,this.btns={};var r=function(t){n.btns[t]={pressed:!1,held:!1};var r=e[t];r.on("touchstart",(function(){var e=n.btns[t];e.pressed=!0,e.held=!0})),r.on("touchend",(function(){var e=n.btns[t];e.pressed=!1,e.held=!1}))};for(var o in e)r(o);this.btnsArr=Object.values(this.btns),this.btnsLen=this.btnsArr.length}var e,n;return e=t,(n=[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"held";return this.btns[t][e]}},{key:"reset",value:function(){for(var t=this.btnsLen-1;t>-1;t--)this.btnsArr[t].pressed=!1}}])&&Ri(e.prototype,n),t}();function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ti(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Di(t,e,n){return e&&Ti(t.prototype,e),n&&Ti(t,n),t}function Mi(t,e){return(Mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xi(t,e){return!e||"object"!==Ii(e)&&"function"!=typeof e?Zi(t):e}function Zi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yi(t){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ui=function(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mi(t,e)}(o,t);var e,n,r=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=Yi(e);if(n){var o=Yi(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return Xi(this,t)});function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c=arguments.length>3?arguments[3]:void 0;return Bi(this,o),Ni(Zi(t=r.call(this,n)),"stateSwitched",!1),t.gameState=c,t.speed=e,t.states={offEdge:new Vi(Zi(t)),jumping:new zi(Zi(t),i),rolling:new Li(Zi(t))},t.state=t.states.jumping,t.state.limitReached=!0,t}return Di(o,[{key:"cleanup",value:function(){this.reset(),this.stateSwitched=!1}},{key:"switchState",value:function(t){var e;if(!this.stateSwitched&&t!==this.state.name){this.state.onExit&&this.state.onExit(),this.state=this.states[t];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.state.onEnter&&(e=this.state).onEnter.apply(e,r),this.stateSwitched=!0}}},{key:"update",value:function(t,e){this.gameState.is("playing")&&(this.state.update(t,e),this.cleanup())}}]),o}(t)},Li=function(){function t(e){Bi(this,t),Ni(this,"name","rolling"),this.controls=e}return Di(t,[{key:"onEnter",value:function(){}},{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")&&this.controls.switchState("jumping",t)}}]),t}(),zi=function(){function t(e,n){Bi(this,t),Ni(this,"name","jumping"),Ni(this,"jmpVel",-260),Ni(this,"maxJvelInc",5.5),Ni(this,"minJmpVel",-375),Ni(this,"mxJmpVel",150),Ni(this,"first",!1),this.controls=e,this.onJump=n}return Di(t,[{key:"onEnter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||t.velY>this.mxJmpVel?this.limitReached=!0:(this.limitReached=!1,t.velY+=this.jmpVel,this.first=!0)}},{key:"onHalt",value:function(){this.limitReached=!0}},{key:"update",value:function(t,e){if(this.first&&t.velY<0&&this.onJump(),this.first=!1,this.controls.get("left")&&(t.velX-=(t.velX>0?3:1)*this.controls.speed*e),this.controls.get("right")&&(t.velX+=(t.velX<0?3:1)*this.controls.speed*e),this.controls.get("axn")){if((t.velY<this.minJmpVel||t.velY>this.mxJmpVel)&&(this.limitReached=!0),this.limitReached)return;t.velY+=this.jmpVel*Math.min(this.maxJvelInc,t.velY*t.velY/100)*e}else this.limitReached=!0}}]),t}(),Vi=function(){function t(e){Bi(this,t),Ni(this,"name","offEdge"),this.controls=e}return Di(t,[{key:"update",value:function(t,e){this.controls.get("left")&&(t.velX-=this.controls.speed*e),this.controls.get("right")&&(t.velX+=this.controls.speed*e),t.velX=(0,we.uZ)(-100,100,t.velX)}}]),t}(),qi=Ui(Ci),Fi=Ui(Ei),Hi=n(987),Wi=n.n(Hi),Ji=n(229),Gi=n.n(Ji),Qi=n(661);Nt()(Qi.Z,{insert:"head",singleton:!1});const Ki=Qi.Z.locals||{};function $i(t){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ec(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nc(t,e){return(nc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rc(t,e){return!e||"object"!==$i(e)&&"function"!=typeof e?oc(t):e}function oc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ic(t){return(ic=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ac=C.Z.isMobile?Fi:qi,sc=C.Z.isMobile?function(){var t=[{name:"left",style:"background: url(".concat(Wi(),"); transform: scale(-1, 1);"),width:65,height:55},{name:"right",style:"background: url(".concat(Wi(),");"),width:65,height:55},{name:"axn",style:"background: url(".concat(Gi(),"); transform: rotate(270deg);"),width:64,height:64}];return Object.freeze(t.reduce((function(t,e){var n=S.create("div");return n.classList.add(Ki.ctrlBtn),n.domNode.style=e.style,n.domNode.style.width="".concat(e.width,"px"),n.domNode.style.height="".concat(e.height,"px"),n.width=e.width,n.height=e.height,t[e.name]=n,t}),{}))}:function(){return Object.freeze({left:[37,65],right:[39,68],axn:[32,87,38]})},uc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nc(t,e)}(u,e);var n,o,i,a,s=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ic(i);if(a){var n=ic(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return rc(this,t)});function u(t){var e,n=t.speed,o=void 0===n?48:n,i=t.width,c=void 0===i?64:i,a=t.height,l=void 0===a?64:a,f=t.fricX,h=void 0===f?4:f,p=t.shard,y=t.cinder,d=t.controls,b=t.sounds,v=t.state,m=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["speed","width","height","fricX","shard","cinder","controls","sounds","state"]);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=s.call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tc(Object(n),!0).forEach((function(e){cc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({frame:"ball"},m)),cc(oc(e),"remDt",0),e.width=c,e.height=l,e.radius=c/2,e.hitCirc={x:0,y:0,radius:e.radius},e.rotation=0,e.anchor={x:c/2,y:l/2},e.pos.y=100,e.shard=p,e.cinder=y,e.sounds=b,e.fricX0=h,e.state=v,e.controls=d||new ac(o,sc(),(function(){b.jump.play()}),e.state),e.wallCollision=new xi({entity:oc(e),blocks:r,rigid:!0,movable:!1,onHit:e.onWallCol.bind(oc(e))}),e.spikeCollision=new xi({entity:oc(e),blocks:"spikes",rigid:!1,movable:!1,onHit:e.explode.bind(oc(e))}),e.magnetCollision=new xi({entity:oc(e),blocks:"magnets",rigid:!0,movable:!1,onHit:e.onMagnetCol.bind(oc(e))}),e.crateCollision=new xi({entity:oc(e),blocks:"crates",rigid:!0,movable:!1,onHit:e.onCrateCol.bind(oc(e))}),ze.makeMovable(oc(e),{accY:C.Z.gravity,roll:!0,fricX:h}),e}return n=u,(o=[{key:"onFall",value:function(){this.controls.switchState("jumping",this,!0)}},{key:"getCtrlBtns",value:function(){if(!C.Z.isMobile)throw new Error("control buttons are not defined for non-touch/desktop devices");return this.controls.mappings}},{key:"onWallCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>(t.movable?200:100)&&this.sounds[t.mat||"concrete"].play(Math.min(1,o/800))}if(n){if(n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"onMagnetCol",value:function(t,e,n,r){if(r){var o=Math.abs(n||e)||0;o>100&&this.sounds.metal.play(Math.min(1,o/3e3))}n&&n<0&&(this.velY=-100,"jumping"===this.controls.state.name&&(this.fricX=2*this.fricX0,this.controls.state.onHalt()))}},{key:"onCrateCol",value:function(t,e,n,r){if(n){if(t.takeDamage(n),n>0)return this.fricX=this.fricX0,this.controls.switchState("rolling");this.controls.state&&"jumping"===this.controls.state.name&&this.controls.state.onHalt()}}},{key:"explode",value:function(){this.state.is("completed")||(this.cinder.pos.x=this.shard.pos.x=this.pos.x+this.width/2,this.cinder.pos.y=this.shard.pos.y=this.pos.y+this.height/2,this.alpha=0,t.Z.get(c).add(this.cinder),t.Z.get(c).add(this.shard),this.state.over(this.pos.x),this.sounds.player_exp.play(),this.sounds.player_din.play(.8),this.velX=this.velY=0)}},{key:"update",value:function(t){this.state.is("game-over")||this.state.is("paused")||(this.controls.update(this,t),Boolean(this.offEdge)?ze.updateOffEdge(this,t):ze.update(this,t),this.wallCollision.update(),this.magnetCollision.update(),this.spikeCollision.update(),this.crateCollision.update())}},{key:"onRemove",value:function(){this.parent=null}},{key:"visible",get:function(){return 0!==this.alpha&&this._visible}},{key:"offEdge",set:function(t){this.controls.switchState("offEdge",t),this._offEdge=t},get:function(){return this._offEdge}}])&&ec(n.prototype,o),u}(at.Z);cc(uc,"sounds",["player_din","concrete","wood","metal","jump","player_exp"]);const lc=uc;var fc=n(284),hc=n.n(fc),pc=n(562),yc=n.n(pc),dc=n(102),bc=n.n(dc),vc=n(210),mc=n.n(vc),gc=n(524),wc=n.n(gc),Oc=n(976),Ac=n.n(Oc),jc=n(399),xc=n.n(jc),Pc=n(224),Sc=n.n(Pc),kc=n(315),_c=n.n(kc),Cc=n(73),Rc=n.n(Cc);function Ec(t){return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ic(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tc(t,e){return(Tc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t,e){return!e||"object"!==Ec(e)&&"function"!=typeof e?Mc(t):e}function Mc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xc(t){return(Xc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Yc=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tc(t,e)}(a,e);var n,r,o,i,c=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xc(o);if(i){var n=Xc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Dc(this,t)});function a(t){var e,n=t.game,r=t.uiRoot,o=t.storage,i=t.sdk;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Zc(Mc(e=c.call(this)),"initialized",!1),Zc(Mc(e),"soundPools",["gate"]);var s=n.assetsCache;return e.storage=o,e.sdk=i,e.game=n,e.uiRoot=r,e.state=new pn,e.state.on("pause",(function(){n.pause()})),e.state.on("play",(function(){n.resume()})),o.on("sound-update",(function(t){t?n.turnOnSound():n.turnOffSound()})),s.once("load",(function(){var t=new Ue({resource:s.get(hc()),resourceId:hc(),meta:s.get(yc())}),r=s.get(mi()),i=new on(r.shard),c=new on(r.cinder),a=lc.sounds.reduce((function(e,n){return e[n]=t.create(n),e}),{});if(i.onRemove=function(){i.parent=null},c.onRemove=function(){c.parent=null},e.soundSprite=t,e.btnSound=t.create("btn"),e.errSound=t.createPool("err_alt"),e.contSound=t.create("continue"),e.music=["music1","music2","music3"].reduce((function(e,n){return e[n]=t.create(n),e}),{}),e.player=new lc({width:64,height:64,fill:"brown",speed:350,fricX:3,pos:{x:300,y:0},shard:i,cinder:c,sounds:a,state:e.state}),e.factories=function(t){var e=t.soundSprite,n=t.assetsCache,r=t.storage,o=t.player,i=t.state,c=e.create("gate_u"),a=e.create("gate_d"),s=e.createPool("orb"),u=e.create("end"),l={on:e.createPool("las_on"),off:e.createPool("las_off")},f=n.get(mi()),h=function(t,e,n,r){return new ui({factory:function(e,o,i,c){return new mr(Object.assign({},f.orb,{player:c,pos:{x:e,y:o},sound:n,storage:r,temp:t}))},size:e,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n}})},p=h(!1,2,s,r),y=h(!0,2,s,r),d=new ui({factory:function(t,e,n,r){return new qr(f.wind,t,e,r)},size:1,free:function(t){t.remove()},reset:function(t,e,n){t.pos.x=e,t.pos.y=n-10}}),b=new Ko(f.fire,(function(){var t=r.getHiscore(i.level)||0,e=i.elapsed;i.level===r.getCurLevel()&&i.level<Tt.length&&r.setCurLevel(i.level+1),(0===t||e<t)&&r.setHiscore(i.level,e),u.play(),i.complete(e,t)})),v=Object.freeze({up:new ui({factory:function(){var t=new on(f.crateUp);return t.onRemove=function(){t.parent=null},t},size:2}),down:new ui({factory:function(){var t=new on(f.crateDown);return t.onRemove=function(){t.parent=null},t},size:2})}),m={snap:e.createPool("w_snap"),crack:e.createPool("w_crack")};return{player:function(t,e){return o.reset=function(){o.pos.x=t,o.pos.y=e,o.alpha=1,o.velY=o.velX=0,o.controls.switchState("jumping",o,!0)},o.reset(),o},gate:function(t,e,n,r){return new _r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(n),!0).forEach((function(e){wi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({pos:{x:t,y:e},colSound:null,uSound:c,dSound:a,player:r},n))},orb:p.create.bind(p),wind:d.create.bind(d),fire:function(t,e,n,r){return b.parent&&b.remove(),b.player=r,b.pos.x=t,b.pos.y=e,b},magnet:function(t,e){return new Qr({pos:{x:t,y:e},frame:"magnet"})},ball:function(t,e,n,r){return new yo(t,e,n.seq,r)},sb1:function(t,e,n,r){return new Io(t,e,"sb1",n.toX,n.toY,n.speed,r)},sb2:function(t,e,n,r){return new Io(t,e,"sb2",n.toX,n.toY,n.speed,r)},sb3:function(t,e,n,r){return new Io(t,e,"sb3",n.toX,n.toY,n.speed,r)},sb4:function(t,e,n,r){return new Io(t,e,"sb4",n.toX,n.toY,n.speed,r)},sb5:function(t,e,n,r){return new Io(t,e,"sb5",n.toX,n.toY,n.speed,r)},sb6:function(t,e,n,r){return new Io(t,e,"sb6",n.toX,n.toY,n.speed,r)},lcr1:function(t,e,n,r){return new ai(t,e,v,y,m,n.luck,n.dmg,n.temp,r)},vlhd:function(t,e,n,r){return new Vo(t,e,n.toX,n.toY,n.speed,n.num,!0,n.period,n.on,r,l)},hlhd:function(t,e,n,r){return new Vo(t,e,n.toX,n.toY,n.speed,n.num,!1,n.period,n.on,r,l)},bus:function(t,e,n){return new bi(t,e,n.toX,n.toY,n.period)}}}({soundSprite:t,assetsCache:s,storage:o,player:e.player,state:e.state}),n.renderer.api===I||!C.Z.isMobile){var u=s.get(bc());e.bg=new Ie({z:2.5,zAtop:1,viewport:C.Z.viewport,subject:e.player,entYOffset:0,tiles:u.map((function(t){return new at.Z({frame:t.name,pos:{x:t.x,y:t.y}})}))}),e.add(e.bg)}e.uiImages={cross:s.get(wc()),resume:s.get(Gi()),pause:s.get(mc()),orb:s.get(xc()),reset:s.get(Ac()),soundOn:s.get(Sc()),soundOff:s.get(_c()),rva:s.get(Rc())}})),e}return n=a,(r=[{key:"setLevel",value:function(t,e){var n=new rr({player:this.player,data:t,viewport:C.Z.viewport,subject:this.player,factories:this.factories,music:e,gameState:this.state});return this.add(n),this.game.renderer.changeBackground(C.Z.isMobile||this.game.renderer.api===E?t.mob_bg:t.bg),this.game.renderer.gTint=t.tint&&t.tint.split(","),n.parent=null,this.bg&&(this.bg.overlay=t.pxbg&&t.pxbg.split(",").map((function(t){return Number(t.trim())})),this.bg.layoutTiles(n.world)),n}},{key:"unsetLevel",value:function(){if(this.children){var e=this.children.length-1;e>-1&&t.Z.removeChild(this,this.children[e])}}},{key:"onEnter",value:function(e){var n=this,r=Math.min(e-1,Tt.length-1),o=Tt[r].id,i=Tt[r].music,c=this.game.assetsCache.get(o),a=this.setLevel(c,i&&this.music[i]),s=function(){a.focusInst(),n.bg&&n.bg.focusInst()};s(),a.idx=r,c.checkpoints&&c.checkpoints.sort((function(t,e){return e.x-t.x}));var u=Dn(this.uiRoot,this.player,this.uiImages,this.storage,this.state,(function(t){return n.game.switchScreen(Xt,!1,t)}),(function(){window.Node=t.Z,window.level=a,a.resetRecursively()}),s,(function(t){if(c.checkpoints){var e,n,r=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ic(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ic(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}(c.checkpoints);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!(t<o.x)){e=o;break}}}catch(t){r.e(t)}finally{r.f()}return e}}),this.btnSound,this.errSound,this.contSound,p,this.game,this.sdk),l=u.teardownUI,f=u.updateTimer;this.state.level=r+1,this.teardownUI=l,this.updateTimer=f,this.state.play()}},{key:"onExit",value:function(){this.unsetLevel(),this.teardownUI&&this.teardownUI(),this.game.reset(),this.state.halt(),this.state.elapsed=0}},{key:"update",value:function(e,n){this.state.elapsed+=e,this.children.forEach((function(r){t.Z.updateRecursively(r,e,n,r)})),this.updateTimer(this.state.elapsed)}}])&&Bc(n.prototype,r),a}(t.Z);var Nc=n(806);Nt()(Nc.Z,{insert:"head",singleton:!1});const Uc=Nc.Z.locals||{};var Lc="prev-btn",zc="next-btn",Vc="start-btn",qc="lev-info",Fc="lock",Hc="loading",Wc="best-time",Jc="retry",Gc=C.Z.isMobile?20:60,Qc=Object.freeze({width:24,height:24}),Kc='\n<div id="'.concat(Fc,'" class="').concat(Uc.icon,'">\n    <svg xmlns="http://www.w3.org/2000/svg" fill="#ffe6d5" width="').concat(Qc.width,'" height="').concat(Qc.height,'" viewBox="0 0 24 24"><path d="M18 10v-4c0-3.313-2.687-6-6-6s-6 2.687-6 6v4h-3v14h18v-14h-3zm-5 7.723v2.277h-2v-2.277c-.595-.347-1-.984-1-1.723 0-1.104.896-2 2-2s2 .896 2 2c0 .738-.404 1.376-1 1.723zm-5-7.723v-4c0-2.206 1.794-4 4-4 2.205 0 4 1.794 4 4v4h-8z"/></svg>\n</div>\n'),$c=function(t){return"Best Time: ".concat(t?t.toFixed(2)+"s":"n/a")};const ta=function(t){var e=t.onStart,n=t.uiRoot,r=t.storage,o=t.level,i=t.maxLevel,c=t.images,a=t.assetsCache,s=t.contSound,u=t.chSound,l=t.errSound,f=o,h=!1;n.content=function(t,e,n){return"\n        ".concat(yn(Lc,t.arrow,Uc.prevBtn),"\n        ").concat(Kc,'\n        <div class="').concat(Uc.infoTitle,'" id="').concat(qc,'">').concat("Level "+e,'</div> \n        <div class="').concat(Uc.infoTitle," ").concat(Uc.infoSub,'" id="').concat(Wc,'">').concat($c(n),"</div>\n        ").concat(yn(zc,t.arrow),"\n        ").concat(ue(Vc,"START"),"\n    ")}(c,o,r.getHiscore(f));var p=n.get("#".concat(Lc)),y=n.get("#".concat(zc)),d=n.get("#".concat(Vc)),b=n.get("#".concat(qc)),v=n.get("#".concat(Fc)),m=n.get("#".concat(Wc)),g=function(t){var e=b.domNode.getBoundingClientRect(),n=e.width,r=e.height,o=m.domNode.getBoundingClientRect(),i=o.width,c=o.height;b.width=n,b.height=r,m.width=i,m.height=c,b.pos=(0,R.qj)(t,b,"center","center",0,-10),m.pos=(0,R.EJ)(b,m,"bottom",0,8),v.pos=(0,R.EJ)(m,Qc,"bottom",0,20)},w=function(t){g(t),p.pos=(0,R.qj)(t,p,"left","center",Gc),y.pos=(0,R.qj)(t,y,"right","center",-Gc),d.pos=(0,R.EJ)(m,d,"bottom",0,64)},O=function(t,e){v.domNode.style.opacity=t<=e||t>Tt.length?0:1,d.domNode.style.opacity=t<=e?1:0},A=function(){if(!h){if(1===f)return l.play();f=Math.max(f-1,1);var t=r.getHiscore(f);m.content=$c(t),b.content="Level ".concat(f),O(f,i),g(C.Z.viewport),u.play()}},j=function(){if(!h){if(f>Tt.length)return l.play();f=Math.min(f+1,Tt.length+1);var t=r.getHiscore(f);b.content=f<=Tt.length?"Level ".concat(f):"Coming Soon",m.content=f<=Tt.length?$c(t):"more coming soon",O(f,i),g(C.Z.viewport),u.play()}},x=function t(){h=!0,n.clear();var r=Tt[f-1].id;if(!a.get(r)){n.content='\n        <div id="'.concat(Hc,'" style="width: 44px; height:  12px;" >\n            <div class="').concat(se.loadingDot," ").concat(se.dotA,'"></div>\n            <div class="').concat(se.loadingDot," ").concat(se.dotB,'"></div>\n            <div class="').concat(se.loadingDot," ").concat(se.dotC,'"></div>\n        </div>\n    ');var o=n.get("#".concat(Hc)),i=function(){e(f),a.off("error")};return o.pos=(0,R.qj)(C.Z.viewport,o,"center","center"),Tt.forEach((function(t){a.unload(t.id)})),a.load([r]),a.once("load",i),void a.once("error",(function(){a.off("load",i),n.content='\n<div id="'.concat("err",'" class="').concat(Uc.error," ").concat(Uc.hidden,'">\n    ').concat("Connection Problem",'\n</div>\n<div id="').concat("retry",'" class="').concat(Uc.retry," ").concat(Uc.hidden,'">\n    RETRY\n</div>\n');var e=n.get("#".concat("err")),r=n.get("#".concat(Jc));e.pos=(0,R.qj)(C.Z.viewport,e,"center","center"),r.pos=(0,R.EJ)(e,r,"bottom",0,10),r.show(),e.show(),r.on("click",t)}))}e(f)},P=function(){if(!h){if(f>i)return l.play();C.Z.viewport.off("change",w),s.play(),x()}},S=function(t){var e=t.which||t.keyCode;if(e)switch(e){case 37:case 65:A();break;case 39:case 68:j();break;case 32:case 13:P()}else switch(t.key){case"Left":case"ArrowLeft":case"A":case"a":A();break;case"Right":case"ArrowRight":case"D":case"d":j();break;case" ":case"Enter":P()}};return!1===C.Z.isMobile&&document.addEventListener("keydown",S),p.on("click",A),y.on("click",j),d.on("click",P),C.Z.viewport.on("change",w),w(C.Z.viewport),function(){!1===C.Z.isMobile&&document.removeEventListener("keydown",S),p.off("click",A),y.off("click",j),d.off("click",P)}};function ea(t){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ra(t,e){return(ra=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oa(t,e){return!e||"object"!==ea(e)&&"function"!=typeof e?ia(t):e}function ia(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const sa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ra(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ca(r);if(o){var n=ca(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return oa(this,t)});function c(t){var e,n=t.game,r=t.uiRoot,o=t.storage;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),aa(ia(e=i.call(this)),"background","#000000"),aa(ia(e),"curLevel",0),e.game=n,e.storage=o,e.uiRoot=r,n.assetsCache.once("load",(function(){var t=n.assetsCache,r=new Ue({resource:t.get(hc()),resourceId:hc(),meta:t.get(yc())});e.contSound=r.createPool("continue"),e.chSound=r.createPool("change"),e.errSound=r.createPool("error")})),e}return e=c,(n=[{key:"onEnter",value:function(t,e){var n=this,r=this.game,o=this.storage,i=this.uiRoot,c=this.contSound,a=this.chSound,s=this.errSound;t?(this.contSound.play(),this.curLevel=o.getCurLevel()):e&&(this.curLevel=Math.min(this.curLevel+1,Tt.length)),this.teardownUI=ta({onStart:function(t){r.switchScreen(Zt,t),n.curLevel=t},uiRoot:i,images:{arrow:r.assetsCache.get(Wi()),resume:r.assetsCache.get(Gi())},assetsCache:r.assetsCache,storage:o,level:this.curLevel,maxLevel:o.getCurLevel(),contSound:c,chSound:a,errSound:s})}},{key:"onExit",value:function(){this.teardownUI()}}])&&na(e.prototype,n),c}(t.Z);var ua,la=n(126),fa=n.n(la),ha=n(343),pa=n.n(ha);function ya(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var da=function(t){var e;try{e=new H(t)}catch(n){console.log("Webgl 2 not supported.. resorting to Canvas2D"),e=new X(t)}return e}({cnvQry:"#arena",scene:null,background:"#000000",viewport:C.Z.viewport}),ba=new ct,va=new yt(new C.Z.StorageStrat(C.Z.storageId)),ma=S.query("#ui-layer"),ga=va.getCurLevel(),wa=[{url:mi(),msg:"loading particles"},wc(),xc(),mc(),Ac(),Gi(),Sc(),_c(),Rc(),{url:Tt[ga-1].id,msg:"loading level data"},{url:Wi(),msg:"loading ui assets"},{url:hc(),msg:"loading audio sprite"},{url:yc(),msg:"loading audio sprite metadata"},{url:fa(),msg:"loading images"},{url:pa(),msg:"loading texture atlas"}];C.Z.isMobile||wa.push(bc());var Oa=!!C.Z.SDKStrat&&new C.Z.SDKStrat;console.log(C.Z);var Aa=new vt(Oa),ja=(ya(ua={},Dt,(function(t){return new $t({game:t,uiRoot:ma,assets:wa,sdk:Aa})})),ya(ua,Mt,(function(t){return new ge({game:t,uiRoot:ma,sdk:Aa})})),ya(ua,Zt,(function(t){return new Yc({game:t,uiRoot:ma,storage:va,sdk:Aa})})),ya(ua,Xt,(function(t){return new sa({game:t,uiRoot:ma,storage:va})})),ua),xa=new A({renderer:da,assetsCache:ba,storage:va,screenFactories:ja});Aa.setOnPause((function(){return xa.pause()})),Aa.setOnResume((function(){return xa.resume()})),va.getSound()||xa.turnOffSound(),ba.once("prog-end",(function(){var t=ba.get(pa()),e=ba.get(fa());da.setTexatlas(e,t),at.Z.injectAtlasmeta(t)})),xa.switchScreen(Dt),xa.start()})()})();
//# sourceMappingURL=script.js.map